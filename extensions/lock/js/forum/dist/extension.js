System.register("lock/addLockBadge",["flarum/extend","flarum/models/Discussion","flarum/components/Badge"],function(t){"use strict";function o(){e(n.prototype,"badges",function(t){this.isLocked()&&t.add("locked",c.component({type:"locked",label:app.trans("lock.locked"),icon:"lock"}))})}var e,n,c;return t("default",o),{setters:[function(t){e=t.extend},function(t){n=t["default"]},function(t){c=t["default"]}],execute:function(){}}}),System.register("lock/addLockControl",["flarum/extend","flarum/utils/DiscussionControls","flarum/components/DiscussionPage","flarum/components/Button"],function(t){"use strict";function o(){e(n,"moderationControls",function(t,o){o.canLock()&&t.add("lock",r.component({children:app.trans(o.isLocked()?"lock.unlock":"lock.lock"),icon:"lock",onclick:this.lockAction.bind(o)}))}),n.lockAction=function(){this.save({isLocked:!this.isLocked()}).then(function(){app.current instanceof c&&app.current.stream.update(),m.redraw()})}}var e,n,c,r;return t("default",o),{setters:[function(t){e=t.extend},function(t){n=t["default"]},function(t){c=t["default"]},function(t){r=t["default"]}],execute:function(){}}}),System.register("lock/main",["flarum/extend","flarum/app","flarum/Model","flarum/models/Discussion","flarum/components/NotificationGrid","lock/components/DiscussionLockedPost","lock/components/DiscussionLockedNotification","lock/addLockBadge","lock/addLockControl"],function(t){"use strict";var o,e,n,c,r,i,u,s,a;return{setters:[function(t){o=t.extend},function(t){e=t["default"]},function(t){n=t["default"]},function(t){c=t["default"]},function(t){r=t["default"]},function(t){i=t["default"]},function(t){u=t["default"]},function(t){s=t["default"]},function(t){a=t["default"]}],execute:function(){e.postComponents.discussionLocked=i,e.notificationComponents.discussionLocked=u,c.prototype.isLocked=n.attribute("isLocked"),c.prototype.canLock=n.attribute("canLock"),s(),a(),o(r.prototype,"notificationTypes",function(t){t.add("discussionLocked",{name:"discussionLocked",icon:"lock",label:e.trans("lock.notify_discussion_locked")})})}}}),System.register("lock/components/DiscussionLockedNotification",["flarum/components/Notification"],function(t){"use strict";function o(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function e(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(t,o):t.__proto__=o)}var n,c,r=function(){function t(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(o,e,n){return e&&t(o.prototype,e),n&&t(o,n),o}}(),i=function(t,o,e){for(var n=!0;n;){var c=t,r=o,i=e;u=a=s=void 0,n=!1,null===c&&(c=Function.prototype);var u=Object.getOwnPropertyDescriptor(c,r);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(i)}var a=Object.getPrototypeOf(c);if(null===a)return void 0;t=a,o=r,e=i,n=!0}};return{setters:[function(t){n=t["default"]}],execute:function(){c=function(t){function n(){o(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return e(n,t),r(n,[{key:"icon",value:function(){return"lock"}},{key:"href",value:function(){var t=this.props.notification;return app.route.discussion(t.subject(),t.content().postNumber)}},{key:"content",value:function(){return app.trans("lock.discussion_locked_notification",{user:this.props.notification.sender()})}}]),n}(n),t("default",c)}}}),System.register("lock/components/DiscussionLockedPost",["flarum/components/EventPost"],function(t){"use strict";function o(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function e(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(t,o):t.__proto__=o)}var n,c,r=function(){function t(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(o,e,n){return e&&t(o.prototype,e),n&&t(o,n),o}}(),i=function(t,o,e){for(var n=!0;n;){var c=t,r=o,i=e;u=a=s=void 0,n=!1,null===c&&(c=Function.prototype);var u=Object.getOwnPropertyDescriptor(c,r);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(i)}var a=Object.getPrototypeOf(c);if(null===a)return void 0;t=a,o=r,e=i,n=!0}};return{setters:[function(t){n=t["default"]}],execute:function(){c=function(t){function n(){o(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return e(n,t),r(n,[{key:"icon",value:function(){return this.props.post.content().locked?"lock":"unlock"}},{key:"descriptionKey",value:function(){return this.props.post.content().locked?"lock.discussion_locked_post":"lock.discussion_unlocked_post"}}]),n}(n),t("default",c)}}});