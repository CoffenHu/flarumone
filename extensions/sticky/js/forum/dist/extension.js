System.register("sticky/addStickyBadge",["flarum/extend","flarum/models/Discussion","flarum/components/Badge"],function(t){"use strict";function n(){e(i.prototype,"badges",function(t){this.isSticky()&&t.add("sticky",o.component({type:"sticky",label:app.trans("sticky.stickied"),icon:"thumb-tack"}),10)})}var e,i,o;return t("default",n),{setters:[function(t){e=t.extend},function(t){i=t["default"]},function(t){o=t["default"]}],execute:function(){}}}),System.register("sticky/addStickyControl",["flarum/extend","flarum/utils/DiscussionControls","flarum/components/DiscussionPage","flarum/components/Button"],function(t){"use strict";function n(){e(i,"moderationControls",function(t,n){n.canSticky()&&t.add("sticky",c.component({children:app.trans(n.isSticky()?"sticky.unsticky":"sticky.sticky"),icon:"thumb-tack",onclick:this.stickyAction.bind(n)}))}),i.stickyAction=function(){this.save({isSticky:!this.isSticky()}).then(function(){app.current instanceof o&&app.current.stream.update(),m.redraw()})}}var e,i,o,c;return t("default",n),{setters:[function(t){e=t.extend},function(t){i=t["default"]},function(t){o=t["default"]},function(t){c=t["default"]}],execute:function(){}}}),System.register("sticky/addStickyExcerpt",["flarum/extend","flarum/components/DiscussionList","flarum/components/DiscussionListItem","flarum/utils/string"],function(t){"use strict";function n(){e(i.prototype,"requestParams",function(t){t.include.push("startPost")}),e(o.prototype,"infoItems",function(t){var n=this.props.discussion;if(n.isSticky()){var e=n.startPost();if(e){var i=m("span",null,c(e.contentPlain(),200));t.add("excerpt",i,-100)}}})}var e,i,o,c;return t("default",n),{setters:[function(t){e=t.extend},function(t){i=t["default"]},function(t){o=t["default"]},function(t){c=t.truncate}],execute:function(){}}}),System.register("sticky/main",["flarum/extend","flarum/app","flarum/Model","flarum/models/Discussion","flarum/components/NotificationGrid","sticky/components/DiscussionStickiedPost","sticky/components/DiscussionStickiedNotification","sticky/addStickyBadge","sticky/addStickyControl","sticky/addStickyExcerpt"],function(t){"use strict";var n,e,i,o,c,r,u,s,a,f,l;return{setters:[function(t){n=t.extend,e=t.notificationType},function(t){i=t["default"]},function(t){o=t["default"]},function(t){c=t["default"]},function(t){r=t["default"]},function(t){u=t["default"]},function(t){s=t["default"]},function(t){a=t["default"]},function(t){f=t["default"]},function(t){l=t["default"]}],execute:function(){i.postComponents.discussionStickied=u,i.notificationComponents.discussionStickied=s,c.prototype.isSticky=o.attribute("isSticky"),c.prototype.canSticky=o.attribute("canSticky"),a(),f(),l(),n(r.prototype,"notificationTypes",function(t){t.add("discussionStickied",{name:"discussionStickied",icon:"thumb-tack",label:i.trans("sticky.notify_discussion_stickied")})})}}}),System.register("sticky/components/DiscussionStickiedNotification",["flarum/components/Notification"],function(t){"use strict";function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var i,o,c=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),r=function(t,n,e){for(var i=!0;i;){var o=t,c=n,r=e;u=a=s=void 0,i=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,c);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(r)}var a=Object.getPrototypeOf(o);if(null===a)return void 0;t=a,n=c,e=r,i=!0}};return{setters:[function(t){i=t["default"]}],execute:function(){o=function(t){function i(){n(this,i),r(Object.getPrototypeOf(i.prototype),"constructor",this).apply(this,arguments)}return e(i,t),c(i,[{key:"icon",value:function(){return"thumb-tack"}},{key:"href",value:function(){var t=this.props.notification;return app.route.discussion(t.subject(),t.content().postNumber)}},{key:"content",value:function(){return app.trans("sticky.discussion_stickied_notification",{user:this.props.notification.sender()})}}]),i}(i),t("default",o)}}}),System.register("sticky/components/DiscussionStickiedPost",["flarum/components/EventPost"],function(t){"use strict";function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var i,o,c=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),r=function(t,n,e){for(var i=!0;i;){var o=t,c=n,r=e;u=a=s=void 0,i=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,c);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(r)}var a=Object.getPrototypeOf(o);if(null===a)return void 0;t=a,n=c,e=r,i=!0}};return{setters:[function(t){i=t["default"]}],execute:function(){o=function(t){function i(){n(this,i),r(Object.getPrototypeOf(i.prototype),"constructor",this).apply(this,arguments)}return e(i,t),c(i,[{key:"icon",value:function(){return"thumb-tack"}},{key:"descriptionKey",value:function(){return this.props.post.content().sticky?"sticky.discussion_stickied_post":"sticky.discussion_unstickied_post"}}]),i}(i),t("default",o)}}});