!function(e){var t=e.babelHelpers={};t.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},t.defaults=function(e,t){for(var n=Object.getOwnPropertyNames(t),s=0;s<n.length;s++){var r=n[s],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e},t.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),t.createDecoratedClass=function(){function e(e,t,n){for(var s=0;s<t.length;s++){var r=t[s],o=r.decorators,i=r.key;if(delete r.key,delete r.decorators,r.enumerable=r.enumerable||!1,r.configurable=!0,("value"in r||r.initializer)&&(r.writable=!0),o){for(var a=0;a<o.length;a++){var u=o[a];if("function"!=typeof u)throw new TypeError("The decorator for method "+r.key+" is of the invalid type "+typeof u);r=u(e,i,r)||r}if(void 0!==r.initializer){n[i]=r;continue}}Object.defineProperty(e,i,r)}}return function(t,n,s,r,o){return n&&e(t.prototype,n,r),s&&e(t,s,o),t}}(),t.createDecoratedObject=function(e){for(var t={},n=0;n<e.length;n++){var s=e[n],r=s.decorators,o=s.key;if(delete s.key,delete s.decorators,s.enumerable=!0,s.configurable=!0,("value"in s||s.initializer)&&(s.writable=!0),r)for(var i=0;i<r.length;i++){var a=r[i];if("function"!=typeof a)throw new TypeError("The decorator for method "+s.key+" is of the invalid type "+typeof a);s=a(t,o,s)||s}s.initializer&&(s.value=s.initializer.call(t)),Object.defineProperty(t,o,s)}return t},t.defineDecoratedPropertyDescriptor=function(e,t,n){var s=n[t];if(s){var r={};for(var o in s)r[o]=s[o];r.value=r.initializer?r.initializer.call(e):void 0,Object.defineProperty(e,t,r)}},t.taggedTemplateLiteral=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},t.taggedTemplateLiteralLoose=function(e,t){return e.raw=t,e},t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)},t.toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},t.slicedToArray=function(){function e(e,t){var n=[],s=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(s=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);s=!0);}catch(u){r=!0,o=u}finally{try{!s&&a["return"]&&a["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t.slicedToArrayLoose=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,s=[],r=e[Symbol.iterator]();!(n=r.next()).done&&(s.push(n.value),!t||s.length!==t););return s}throw new TypeError("Invalid attempt to destructure non-iterable instance")},t.objectWithoutProperties=function(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n},t.hasOwn=Object.prototype.hasOwnProperty,t.slice=Array.prototype.slice,t.bind=Function.prototype.bind,t.defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.asyncToGenerator=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function s(s,i){try{var a=t[s](i),u=a.value}catch(l){return void n(l)}a.done?e(u):Promise.resolve(u).then(r,o)}var r=s.bind(null,"next"),o=s.bind(null,"throw");r()})}},t.interopExportWildcard=function(e,t){var n=t({},e);return delete n["default"],n},t.interopRequireWildcard=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t},t.interopRequireDefault=function(e){return e&&e.__esModule?e:{"default":e}},t._typeof=function(e){return e&&e.constructor===Symbol?"symbol":typeof e},t._extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},t.get=function n(e,t,s){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:n(o,t,s)}if("value"in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(s)},t.set=function s(e,t,n,r){var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var i=Object.getPrototypeOf(e);null!==i&&s(i,t,n,r)}else if("value"in o&&o.writable)o.value=n;else{var a=o.set;void 0!==a&&a.call(r,n)}return n},t.newArrowCheck=function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},t.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.objectDestructuringEmpty=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},t.temporalUndefined={},t.temporalAssertDefined=function(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return!0},t.selfGlobal="undefined"==typeof e?self:e,t.typeofReactElement="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,t.defaultProps=function(e,t){if(e)for(var n in e)"undefined"==typeof t[n]&&(t[n]=e[n]);return t},t._instanceof=function(e,t){return null!=t&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t},t.interopRequire=function(e){return e&&e.__esModule?e["default"]:e}}("undefined"==typeof global?self:global),System.register("flarum/ForumApp",["flarum/utils/History","flarum/App","flarum/components/Search","flarum/components/Composer","flarum/components/ReplyComposer","flarum/components/DiscussionPage"],function(e){"use strict";var t,n,s,r,o,i,a;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]}],execute:function(){a=function(e){function n(){babelHelpers.classCallCheck(this,n);for(var e=arguments.length,r=Array(e),o=0;e>o;o++)r[o]=arguments[o];babelHelpers.get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,r),this.history=new t,this.pane=null,this.search=new s,this.drawer=null,this.postComponents={},this.notificationComponents={}}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"composingReplyTo",value:function(e){return this.composer.component instanceof o&&this.composer.component.props.discussion===e&&this.composer.position!==r.PositionEnum.HIDDEN}},{key:"viewingDiscussion",value:function(e){return this.current instanceof i&&this.current.discussion===e}}]),n}(n),e("default",a)}}}),System.register("flarum/app",["flarum/ForumApp","flarum/initializers/store","flarum/initializers/preload","flarum/initializers/routes","flarum/initializers/components","flarum/initializers/humanTime","flarum/initializers/boot"],function(e){"use strict";var t,n,s,r,o,i,a,u;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]}],execute:function(){u=new t,u.initializers.add("store",n),u.initializers.add("routes",r),u.initializers.add("components",o),u.initializers.add("humanTime",i),u.initializers.add("preload",s,-100),u.initializers.add("boot",a,-100),e("default",u)}}}),System.register("flarum/components/Activity",["flarum/Component","flarum/helpers/humanTime","flarum/helpers/avatar"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]}],execute:function(){r=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){this.props.activity;return m("div",{className:"Activity"},s(this.user(),{className:"Activity-avatar"}),m("div",{className:"Activity-header"},m("strong",{className:"Activity-description"},this.description()),n(this.time())),this.content())}},{key:"user",value:function(){}},{key:"time",value:function(){}},{key:"description",value:function(){}},{key:"content",value:function(){}}]),t}(t),e("default",r)}}}),System.register("flarum/components/AvatarEditor",["flarum/Component","flarum/helpers/avatar","flarum/helpers/icon","flarum/helpers/listItems","flarum/utils/ItemList","flarum/components/Button","flarum/components/LoadingIndicator"],function(e){"use strict";var t,n,s,r,o,i,a,u;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]}],execute:function(){u=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.loading=!1}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this.props.user;return m("div",{className:"AvatarEditor Dropdown "+this.props.className+(this.loading?" loading":"")},n(e),m("a",{className:"Dropdown-toggle","data-toggle":"dropdown",onclick:this.quickUpload.bind(this)},this.loading?a.component():s("pencil")),m("ul",{className:"Dropdown-menu Menu"},r(this.controlItems().toArray())))}},{key:"controlItems",value:function(){var e=new o;return e.add("upload",i.component({icon:"upload",children:app.trans("core.upload"),onclick:this.upload.bind(this)})),e.add("remove",i.component({icon:"times",children:app.trans("core.remove"),onclick:this.remove.bind(this)})),e}},{key:"quickUpload",value:function(e){this.props.user.avatarUrl()||(e.preventDefault(),e.stopPropagation(),this.upload())}},{key:"upload",value:function(){var e=this;if(!this.loading){var t=this.props.user,n=$('<input type="file">');n.appendTo("body").hide().click().on("change",function(n){var s=new FormData;s.append("avatar",$(n.target)[0].files[0]),e.loading=!0,m.redraw(),app.request({method:"POST",url:app.forum.attribute("apiUrl")+"/users/"+t.id()+"/avatar",serialize:function(e){return e},data:s}).then(e.success.bind(e),e.failure.bind(e))})}}},{key:"remove",value:function(){var e=this.props.user;this.loading=!0,m.redraw(),app.request({method:"DELETE",url:app.forum.attribute("apiUrl")+"/users/"+e.id()+"/avatar"}).then(this.success.bind(this),this.failure.bind(this))}},{key:"success",value:function(e){app.store.pushPayload(e),delete this.props.user.avatarColor,this.loading=!1,m.redraw()}},{key:"failure",value:function(){this.loading=!1}}],[{key:"initProps",value:function(e){babelHelpers.get(Object.getPrototypeOf(t),"initProps",this).call(this,e),e.className=e.className||""}}]),t}(t),e("default",u)}}}),System.register("flarum/components/ChangeEmailModal",["flarum/components/Modal","flarum/components/Button"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.success=!1,this.email=m.prop(app.session.user.email())}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"className",value:function(){return"ChangeEmailModal Modal--small"}},{key:"title",value:function(){return app.trans("core.change_email")}},{key:"content",value:function(){if(this.success){var e=this.email().split("@")[1];return m("div",{className:"Modal-body"},m("div",{className:"Form Form--centered"},m("p",{className:"helpText"},app.trans("core.confirmation_email_sent",{email:m("strong",null,this.email())})),m("div",{className:"Form-group"},m("a",{href:"http://"+e,className:"Button Button--primary Button--block"},app.trans("core.go_to",{location:e})))))}return m("div",{className:"Modal-body"},m("div",{className:"Form Form--centered"},m("div",{className:"Form-group"},m("input",{type:"email",name:"email",className:"FormControl",placeholder:app.session.user.email(),value:this.email(),onchange:m.withAttr("value",this.email),disabled:this.loading})),m("div",{className:"Form-group"},n.component({className:"Button Button--primary Button--block",type:"submit",loading:this.loading,children:app.trans("core.save_changes")}))))}},{key:"onsubmit",value:function(e){var t=this;return e.preventDefault(),this.email()===app.session.user.email()?void this.hide():(this.loading=!0,void app.session.user.save({email:this.email()}).then(function(){t.loading=!1,t.success=!0,m.redraw()},function(){t.loading=!1}))}}]),t}(t),e("default",s)}}}),System.register("flarum/components/ChangePasswordModal",["flarum/components/Modal","flarum/components/Button"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"className",value:function(){return"ChangePasswordModal Modal--small"}},{key:"title",value:function(){return app.trans("core.change_password")}},{key:"content",value:function(){return m("div",{className:"Modal-body"},m("div",{className:"Form Form--centered"},m("p",{className:"helpText"},app.trans("core.change_password_help")),m("div",{className:"Form-group"},n.component({className:"Button Button--primary Button--block",type:"submit",loading:this.loading,children:app.trans("core.send_password_reset_email")}))))}},{key:"onsubmit",value:function(e){var t=this;e.preventDefault(),this.loading=!0,app.request({method:"POST",url:app.forum.attribute("apiUrl")+"/forgot",data:{email:app.session.user.email()}}).then(function(){return t.hide()},function(){return t.loading=!1})}}]),t}(t),e("default",s)}}}),System.register("flarum/components/CommentPost",["flarum/components/Post","flarum/utils/classList","flarum/components/PostUser","flarum/components/PostMeta","flarum/components/PostEdited","flarum/components/EditPostComposer","flarum/components/Composer","flarum/utils/ItemList","flarum/helpers/listItems","flarum/components/Button"],function(e){"use strict";var t,n,s,r,o,i,a,u,l,c,p;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]},function(e){u=e["default"]},function(e){l=e["default"]},function(e){c=e["default"]}],execute:function(){p=function(e){function t(){var e=this;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r),this.revealContent=!1,this.postUser=new s({post:this.props.post}),this.subtree.check(function(){return e.postUser.cardVisible},function(){return e.isEditing()})}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"content",value:function(){return[m("header",{className:"Post-header"},m("ul",null,l(this.headerItems().toArray()))),m("div",{className:"Post-body"},this.isEditing()?m("div",{className:"Post-preview",config:this.configPreview.bind(this)}):m.trust(this.props.post.contentHtml())),m("footer",{className:"Post-footer"},m("ul",null,l(this.footerItems().toArray()))),m("aside",{className:"Post-actions"},m("ul",null,l(this.actionItems().toArray())))]}},{key:"config",value:function(e,n){babelHelpers.get(Object.getPrototypeOf(t.prototype),"config",this).apply(this,arguments);var s=this.isEditing()?"":this.props.post.contentHtml();n.contentHtml!==s&&("undefined"==typeof hljs?this.loadHljs():this.$("pre code").each(function(e,t){hljs.highlightBlock(t)})),n.contentHtml=s}},{key:"loadHljs",value:function(){var e=document.getElementsByTagName("head")[0],t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/default.min.css",e.appendChild(t);var n=document.createElement("script");n.type="text/javascript",n.onload=function(){hljs._={},hljs.initHighlighting()},n.async=!0,n.src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js",e.appendChild(n)}},{key:"isEditing",value:function(){return app.composer.component instanceof i&&app.composer.component.props.post===this.props.post&&app.composer.position!==a.PositionEnum.MINIMIZED}},{key:"attrs",value:function(){var e=this.props.post;return{className:n({CommentPost:!0,"Post--hidden":e.isHidden(),"Post--edited":e.isEdited(),revealContent:this.revealContent,editing:this.isEditing()})}}},{key:"configPreview",value:function(e,t,n){if(!t){var s=void 0,r=function(){var t=app.composer.component.content();s!==t&&(s=t,s9e.TextFormatter.preview(s||"",e))};r();var o=setInterval(r,50);n.onunload=function(){return clearInterval(o)}}}},{key:"toggleContent",value:function(){this.revealContent=!this.revealContent}},{key:"headerItems",value:function(){var e=new u,t=this.props.post,n={post:t};return e.add("user",this.postUser.render(),100),e.add("meta",r.component(n)),t.isEdited()&&!t.isHidden()&&e.add("edited",o.component(n)),t.isHidden()&&e.add("toggle",c.component({className:"Button Button--default Button--more",icon:"ellipsis-h",onclick:this.toggleContent.bind(this)})),e}},{key:"footerItems",value:function(){return new u}},{key:"actionItems",value:function(){return new u}}]),t}(t),e("default",p)}}}),System.register("flarum/components/Composer",["flarum/Component","flarum/utils/ItemList","flarum/components/ComposerButton","flarum/helpers/listItems","flarum/utils/classList","flarum/utils/computed"],function(e){"use strict";var t,n,s,r,o,i,a;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]}],execute:function(){a=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.position=t.PositionEnum.HIDDEN,this.oldPosition=null,this.height=null,this.computedHeight=i("height","position",function(e,n){return n===t.PositionEnum.MINIMIZED?"":n===t.PositionEnum.FULLSCREEN?$(window).height():Math.max(200,Math.min(e,$(window).height()-$("#header").outerHeight()))})}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this,n={minimized:this.position===t.PositionEnum.MINIMIZED,fullScreen:this.position===t.PositionEnum.FULLSCREEN};n.visible=this.position===t.PositionEnum.NORMAL||n.minimized||n.fullScreen,this.component&&(this.component.props.disabled=n.minimized);var s=function(){e.position===t.PositionEnum.MINIMIZED&&e.show(),m.redraw.strategy("none")};return m("div",{className:"Composer "+o(n)},m("div",{className:"Composer-handle",config:this.configHandle.bind(this)}),m("ul",{className:"Composer-controls"},r(this.controlItems().toArray())),m("div",{className:"Composer-content",onclick:s},this.component?this.component.render():""))}},{key:"config",value:function(e,t){var n=this;if(this.updateHeight(),!e){t.retain=!0,this.height=localStorage.getItem("composerHeight")||this.$().height(),this.$().hide(),this.$().on("focus blur",":input",function(e){return n.$().toggleClass("active","focusin"===e.type)}),this.$().on("keydown",":input","esc",function(){return n.close()}),window.onbeforeunload=function(){return n.component&&n.component.preventExit()||null};var s={};$(window).on("resize",s.onresize=this.updateHeight.bind(this)).resize(),$(document).on("mousemove",s.onmousemove=this.onmousemove.bind(this)).on("mouseup",s.onmouseup=this.onmouseup.bind(this)),t.onunload=function(){$(window).off("resize",s.onresize),$(document).off("mousemove",s.onmousemove).off("mouseup",s.onmouseup)}}}},{key:"configHandle",value:function(e,t){if(!t){var n=this;$(e).css("cursor","row-resize").bind("dragstart mousedown",function(e){return e.preventDefault()}).mousedown(function(e){n.mouseStart=e.clientY,n.heightStart=n.$().height(),n.handle=$(this),$("body").css("cursor","row-resize")})}}},{key:"onmousemove",value:function(e){if(this.handle){var t=this.mouseStart-e.clientY;this.height=this.heightStart+t,this.updateHeight();var n=$(window).scrollTop(),s=n>0&&n+$(window).height()>=$(document).height();this.updateBodyPadding(s),localStorage.setItem("composerHeight",this.height)}}},{key:"onmouseup",value:function(){this.handle&&(this.handle=null,$("body").css("cursor",""))}},{key:"updateHeight",value:function(){var e=this.computedHeight(),t=this.$(".TextEditor-flexible");if(this.$().height(e),t.length){var n=t.offset().top-this.$().offset().top,s=parseInt(t.css("padding-bottom"),10),r=this.$(".TextEditor-controls").outerHeight(!0);t.height(e-n-s-r)}}},{key:"updateBodyPadding",value:function(){var e=this.position!==t.PositionEnum.HIDDEN&&this.position!==t.PositionEnum.MINIMIZED,n=e?this.computedHeight()-parseInt($("#app").css("padding-bottom"),10):0;$("#content").css({paddingBottom:n})}},{key:"update",value:function(){var e=this,n=this.$().stop(!0),s=n.is(":visible")?n.outerHeight():0,r=$(window).scrollTop();m.redraw(!0),n.show(),this.updateHeight();var o=n.outerHeight();switch(this.position){case t.PositionEnum.NORMAL:this.oldPosition!==t.PositionEnum.FULLSCREEN?(n.show().css({height:s}).animate({bottom:0,height:o},"fast",this.component.focus.bind(this.component)),"absolute"===n.css("position")&&(n.css("top",$(window).scrollTop()),this.$backdrop=$("<div/>").addClass("composer-backdrop").appendTo("body"))):this.component.focus();break;case t.PositionEnum.MINIMIZED:n.css({top:"auto",height:s}).animate({height:o},"fast"),this.$backdrop&&this.$backdrop.remove();break;case t.PositionEnum.HIDDEN:n.css({top:"auto",height:s}).animate({bottom:-o},"fast",function(){n.hide(),e.clear(),m.redraw()}),this.$backdrop&&this.$backdrop.remove();break;case t.PositionEnum.FULLSCREEN:this.component.focus()}this.position!==t.PositionEnum.FULLSCREEN&&(this.updateBodyPadding(),$("html, body").scrollTop(r)),this.oldPosition=this.position}},{key:"preventExit",value:function a(){if(this.component){var a=this.component.preventExit();if(a)return!confirm(a)}}},{key:"load",value:function(e){this.preventExit()||(this.component&&(this.clear(),m.redraw(!0)),this.component=e)}},{key:"clear",value:function(){this.component=null}},{key:"show",value:function(){-1!==[t.PositionEnum.MINIMIZED,t.PositionEnum.HIDDEN].indexOf(this.position)&&(this.position=t.PositionEnum.NORMAL),this.update()}},{key:"hide",value:function(){this.position=t.PositionEnum.HIDDEN,this.update()}},{key:"close",value:function(){this.preventExit()||this.hide()}},{key:"minimize",value:function(){this.position!==t.PositionEnum.HIDDEN&&(this.position=t.PositionEnum.MINIMIZED,this.update())}},{key:"fullScreen",value:function(){this.position!==t.PositionEnum.HIDDEN&&(this.position=t.PositionEnum.FULLSCREEN,this.update())}},{key:"exitFullScreen",value:function(){this.position===t.PositionEnum.FULLSCREEN&&(this.position=t.PositionEnum.NORMAL,this.update())}},{key:"controlItems",value:function(){var e=new n;return this.position===t.PositionEnum.FULLSCREEN?e.add("exitFullScreen",s.component({icon:"compress",title:app.trans("core.exit_full_screen"),onclick:this.exitFullScreen.bind(this)})):(this.position!==t.PositionEnum.MINIMIZED&&(e.add("minimize",s.component({icon:"minus minimize",title:app.trans("core.minimize"),onclick:this.minimize.bind(this),itemClassName:"App-backControl"})),e.add("fullScreen",s.component({icon:"expand",title:app.trans("core.full_screen"),onclick:this.fullScreen.bind(this)}))),e.add("close",s.component({icon:"times",title:app.trans("core.close"),onclick:this.close.bind(this)}))),e}}]),t}(t),a.PositionEnum={HIDDEN:"hidden",NORMAL:"normal",MINIMIZED:"minimized",FULLSCREEN:"fullScreen"},e("default",a)}}}),System.register("flarum/components/ComposerBody",["flarum/Component","flarum/components/LoadingIndicator","flarum/components/TextEditor","flarum/helpers/avatar","flarum/helpers/listItems","flarum/utils/ItemList"],function(e){"use strict";var t,n,s,r,o,i,a;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]}],execute:function(){a=function(e){function t(e){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.loading=!1,this.content=m.prop(this.props.originalContent),this.editor=new s({submitLabel:this.props.submitLabel,placeholder:this.props.placeholder,onchange:this.content,onsubmit:this.onsubmit.bind(this),value:this.content()})}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return this.editor.props.disabled=this.loading,m("div",{className:"ComposerBody"},r(this.props.user,{className:"ComposerBody-avatar"}),m("div",{className:"ComposerBody-content"},m("ul",{className:"ComposerBody-header"},o(this.headerItems().toArray())),m("div",{className:"ComposerBody-editor"},this.editor.render())),n.component({className:"ComposerBody-loading"+(this.loading?" active":"")}))}},{key:"focus",value:function(){this.$(":input:enabled:visible:first").focus()}},{key:"preventExit",value:function(){var e=this.content();return e&&e!==this.props.originalContent&&this.props.confirmExit}},{key:"headerItems",value:function(){return new i}},{key:"onsubmit",value:function(){}}]),t}(t),e("default",a)}}}),System.register("flarum/components/ComposerButton",["flarum/components/Button"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]}],execute:function(){n=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"initProps",value:function(e){babelHelpers.get(Object.getPrototypeOf(t),"initProps",this).call(this,e),e.className=e.className||"Button Button--icon Button--link"}}]),t}(t),e("default",n)}}}),System.register("flarum/components/DiscussionComposer",["flarum/components/ComposerBody"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]}],execute:function(){n=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.title=m.prop("")}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"headerItems",value:function(){var e=babelHelpers.get(Object.getPrototypeOf(t.prototype),"headerItems",this).call(this);return e.add("title",m("h3",null,m("input",{className:"FormControl",value:this.title(),oninput:m.withAttr("value",this.title),placeholder:this.props.titlePlaceholder,disabled:!!this.props.disabled,onkeydown:this.onkeydown.bind(this)}))),e}},{key:"onkeydown",value:function(e){13===e.which&&(e.preventDefault(),this.editor.setSelectionRange(0,0)),m.redraw.strategy("none")}},{key:"config",value:function(e,n){var s=this;babelHelpers.get(Object.getPrototypeOf(t.prototype),"config",this).call(this,e,n),this.editor.$("textarea").keydown(function(e){if(8===e.which&&0===e.target.selectionStart&&0===e.target.selectionEnd){e.preventDefault();var t=s.$(":input:enabled:visible:first")[0];t.focus(),t.selectionStart=t.selectionEnd=t.value.length}})}},{key:"preventExit",value:function(){return(this.title()||this.content())&&this.props.confirmExit}},{key:"data",value:function(){return{title:this.title(),content:this.content()}}},{key:"onsubmit",value:function(){var e=this;this.loading=!0;var t=this.data();app.store.createRecord("discussions").save(t).then(function(e){app.composer.hide(),app.cache.discussionList.addDiscussion(e),m.route(app.route.discussion(e))},function(t){e.loading=!1,m.redraw(),app.alertErrors(t.errors)})}}],[{key:"initProps",value:function(e){babelHelpers.get(Object.getPrototypeOf(t),"initProps",this).call(this,e),e.placeholder=e.placeholder||app.trans("core.write_a_post"),e.submitLabel=e.submitLabel||app.trans("core.post_discussion"),e.confirmExit=e.confirmExit||app.trans("core.confirm_discard_discussion"),e.titlePlaceholder=e.titlePlaceholder||app.trans("core.discussion_title")}}]),t}(t),e("default",n)}}}),System.register("flarum/components/DiscussionHero",["flarum/Component","flarum/utils/ItemList","flarum/helpers/listItems"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]}],execute:function(){r=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return m("header",{className:"Hero DiscussionHero"},m("div",{className:"container"},m("ul",{className:"DiscussionHero-items"},s(this.items().toArray()))))}},{key:"items",value:function r(){var r=new n,e=this.props.discussion,t=e.badges().toArray();return t.length&&r.add("badges",m("ul",{className:"DiscussionHero-badges badges"},s(t)),10),r.add("title",m("h2",{className:"DiscussionHero-title"},e.title())),r}}]),t}(t),e("default",r)}}}),System.register("flarum/components/DiscussionList",["flarum/Component","flarum/components/DiscussionListItem","flarum/components/Button","flarum/components/LoadingIndicator","flarum/components/Placeholder"],function(e){"use strict";var t,n,s,r,o,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]}],execute:function(){i=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.loading=!0,this.moreResults=!1,this.discussions=[],this.refresh()}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this.props.params,t=void 0;if(this.loading?t=r.component():this.moreResults&&(t=s.component({children:app.trans("core.load_more"),className:"Button",onclick:this.loadMore.bind(this)})),0===this.discussions.length&&!this.loading){var i="Looks like there are no discussions here. Why don't you create a new one?";return m("div",{className:"DiscussionList"},o.component({text:i}))}return m("div",{className:"DiscussionList"},m("ul",{className:"DiscussionList-discussions"},this.discussions.map(function(t){return m("li",{key:t.id(),"data-id":t.id()},n.component({discussion:t,params:e}))})),m("div",{className:"DiscussionList-loadMore"},t))}},{key:"requestParams",value:function(){var e={include:["startUser","lastUser"],filter:{}};return e.sort=this.sortMap()[this.props.params.sort],this.props.params.q&&(e.filter.q=this.props.params.q,e.include.push("relevantPosts","relevantPosts.discussion","relevantPosts.user")),e}},{key:"sortMap",value:function(){var e={};return this.props.params.q&&(e.relevance=""),e.latest="-lastTime",e.top="-commentsCount",e.newest="-startTime",e.oldest="+startTime",e}},{key:"refresh",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];return t&&(this.loading=!0,this.discussions=[]),this.loadResults().then(function(t){
e.discussions=[],e.parseResults(t)},function(){e.loading=!1,m.redraw()})}},{key:"loadResults",value:function(e){var t=app.preloadedDocument();if(t)return m.deferred().resolve(t).promise;var n=this.requestParams();return n.page={offset:e},n.include=n.include.join(","),app.store.find("discussions",n)}},{key:"loadMore",value:function(){this.loading=!0,this.loadResults(this.discussions.length).then(this.parseResults.bind(this))}},{key:"parseResults",value:function(e){return[].push.apply(this.discussions,e),this.loading=!1,this.moreResults=!!e.payload.links.next,m.lazyRedraw(),e}},{key:"removeDiscussion",value:function(e){var t=this.discussions.indexOf(e);-1!==t&&this.discussions.splice(t,1)}},{key:"addDiscussion",value:function(e){this.discussions.unshift(e)}}]),t}(t),e("default",i)}}}),System.register("flarum/components/DiscussionListItem",["flarum/Component","flarum/helpers/avatar","flarum/helpers/listItems","flarum/helpers/highlight","flarum/helpers/icon","flarum/utils/humanTime","flarum/utils/ItemList","flarum/utils/abbreviateNumber","flarum/components/Dropdown","flarum/components/TerminalPost","flarum/components/PostPreview","flarum/utils/SubtreeRetainer","flarum/utils/DiscussionControls","flarum/utils/slidable","flarum/utils/extractText"],function(e){"use strict";var t,n,s,r,o,i,a,u,l,c,p,f,d,h,b,v;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]},function(e){u=e["default"]},function(e){l=e["default"]},function(e){c=e["default"]},function(e){p=e["default"]},function(e){f=e["default"]},function(e){d=e["default"]},function(e){h=e["default"]},function(e){b=e["default"]}],execute:function(){v=function(e){function t(){var e=this;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,s=Array(n),r=0;n>r;r++)s[r]=arguments[r];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,s),this.subtree=new f(function(){return e.props.discussion.freshness},function(){var e=app.session.user&&app.session.user.readTime();return e&&e.getTime()},function(){return e.active()})}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this,t=this.subtree.retain();if(t)return t;var a=this.props.discussion,c=a.startUser(),f=a.isUnread(),h=a.isRead(),v=!this.showRepliesCount()&&f,g=Math.min(a.lastPostNumber(),(a.readNumber()||0)+1),y=this.props.params.q?a.relevantPosts():[],k=d.controls(a,this).toArray();return m("div",{className:"DiscussionListItem "+(this.active()?"active":"")},k.length?l.component({icon:"ellipsis-v",children:k,className:"DiscussionListItem-controls",buttonClassName:"Button Button--icon Button--flat Slidable-underneath Slidable-underneath--right"}):"",m("a",{className:"Slidable-underneath Slidable-underneath--left Slidable-underneath--elastic"+(f?"":" disabled"),onclick:this.markAsRead.bind(this)},o("check")),m("div",{className:"DiscussionListItem-content Slidable-content"+(f?" unread":"")+(h?" read":"")},m("a",{href:c?app.route.user(c):"#",className:"DiscussionListItem-author",title:b(app.trans("core.discussion_started",{user:c,ago:i(a.startTime())})),config:function(e){$(e).tooltip({placement:"right"}),m.route.apply(this,arguments)}},n(c,{title:""})),m("ul",{className:"DiscussionListItem-badges badges"},s(a.badges().toArray())),m("a",{href:app.route.discussion(a,g),config:m.route,className:"DiscussionListItem-main"},m("h3",{className:"DiscussionListItem-title"},r(a.title(),this.props.params.q)),m("ul",{className:"DiscussionListItem-info"},s(this.infoItems().toArray()))),m("span",{className:"DiscussionListItem-count",onclick:this.markAsRead.bind(this),title:v?app.trans("core.mark_as_read"):""},u(a[v?"unreadCount":"repliesCount"]())),y&&y.length?m("div",{className:"DiscussionListItem-relevantPosts"},y.map(function(t){return p.component({post:t,highlight:e.props.params.q})})):""))}},{key:"config",value:function(e){var t=this;e||"ontouchstart"in window&&!function(){var e=h(t.$().addClass("Slidable"));t.$(".DiscussionListItem-controls").on("hidden.bs.dropdown",function(){return e.reset()})}()}},{key:"active",value:function(){var e=m.route.param("id");return e&&e.split("-")[0]===this.props.discussion.id()}},{key:"showStartPost",value:function(){return-1!==["newest","oldest"].indexOf(this.props.params.sort)}},{key:"showRepliesCount",value:function(){return"replies"===this.props.params.sort}},{key:"markAsRead",value:function(){var e=this.props.discussion;e.isUnread()&&(e.save({readNumber:e.lastPostNumber()}),m.redraw())}},{key:"infoItems",value:function(){var e=new a;return e.add("terminalPost",c.component({discussion:this.props.discussion,lastPost:!this.showStartPost()})),e}}]),t}(t),e("default",v)}}}),System.register("flarum/components/DiscussionPage",["flarum/components/Page","flarum/utils/ItemList","flarum/components/DiscussionHero","flarum/components/PostStream","flarum/components/PostStreamScrubber","flarum/components/LoadingIndicator","flarum/components/SplitDropdown","flarum/helpers/listItems","flarum/utils/DiscussionControls"],function(e){"use strict";var t,n,s,r,o,i,a,u,l,c;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]},function(e){u=e["default"]},function(e){l=e["default"]}],execute:function(){c=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.discussion=null,this.near=null,this.refresh(),app.cache.discussionList&&(app.pane.enable(),app.pane.hide(),app.previous instanceof t&&m.redraw.strategy("diff")),app.history.push("discussion"),this.bodyClass="App--discussion"}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onunload",value:function(e){if(this.discussion){var t=m.route.param("id");if(t&&t.split("-")[0]===this.discussion.id()){e.preventDefault();var n=m.route.param("near")||"1";return n!==String(this.near)&&this.stream.goToNumber(n),void(this.near=null)}}app.pane.disable(),app.composingReplyTo(this.discussion)&&!app.composer.component.content()?app.composer.hide():app.composer.minimize()}},{key:"view",value:function(){var e=this.discussion;return m("div",{className:"DiscussionPage"},app.cache.discussionList?m("div",{className:"DiscussionPage-list",config:this.configPane.bind(this)},$(".App-navigation").is(":visible")?"":app.cache.discussionList.render()):"",m("div",{className:"DiscussionPage-discussion"},e?[s.component({discussion:e}),m("div",{className:"container"},m("nav",{className:"DiscussionPage-nav"},m("ul",null,u(this.sidebarItems().toArray()))),m("div",{className:"DiscussionPage-stream"},this.stream.render()))]:i.component({className:"LoadingIndicator--block"})))}},{key:"refresh",value:function(){this.near=m.route.param("near")||0,this.discussion=null;var e=app.preloadedDocument();if(e)setTimeout(this.show.bind(this,e));else{var t=this.requestParams();app.store.find("discussions",m.route.param("id").split("-")[0],t).then(this.show.bind(this))}m.lazyRedraw()}},{key:"requestParams",value:function(){return{page:{near:this.near}}}},{key:"show",value:function(e){this.discussion=e,app.setTitle(e.title()),app.setTitleCount(0);var t=[];e.payload&&e.payload.included&&(t=e.payload.included.filter(function(e){return"posts"===e.type&&e.relationships&&e.relationships.discussion}).map(function(e){return app.store.getById("posts",e.id)}).sort(function(e,t){return e.id()-t.id()}).slice(0,20)),this.stream=new r({discussion:e,includedPosts:t}),this.stream.on("positionChanged",this.positionChanged.bind(this)),this.stream.goToNumber(m.route.param("near")||t[0].number(),!0)}},{key:"configPane",value:function(e,t,n){if(!t){n.retain=!0;var s=$(e),r=app.pane;s.hover(r.show.bind(r),r.onmouseleave.bind(r));var o=function(e){e.pageX<10&&r.show()};$(document).on("mousemove",o),n.onunload=function(){return $(document).off("mousemove",o)};var i=s.find(".DiscussionListItem.active");if(i.length){var a=s.offset().top,u=a+s.outerHeight(),l=i.offset().top,c=l+i.outerHeight();(a>l||c>u)&&s.scrollTop(s.scrollTop()-a+l)}}}},{key:"sidebarItems",value:function(){var e=new n;return e.add("controls",a.component({children:l.controls(this.discussion,this).toArray(),icon:"ellipsis-v",className:"App-primaryControl",buttonClassName:"Button--primary"})),e.add("scrubber",o.component({stream:this.stream,className:"App-titleControl"}),-100),e}},{key:"positionChanged",value:function(e,t){var n=this.discussion,s=app.route.discussion(n,this.near=e);m.route(s,!0),window.history.replaceState(null,document.title,s),app.history.push("discussion"),app.session.user&&t>(n.readNumber()||0)&&(n.save({readNumber:t}),m.redraw())}}]),t}(t),e("default",c)}}}),System.register("flarum/components/DiscussionRenamedNotification",["flarum/components/Notification"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]}],execute:function(){n=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"icon",value:function(){return"pencil"}},{key:"href",value:function(){var e=this.props.notification;return app.route.discussion(e.subject(),e.content().postNumber)}},{key:"content",value:function(){return app.trans("core.discussion_renamed_notification",{user:this.props.notification.sender()})}}]),t}(t),e("default",n)}}}),System.register("flarum/components/DiscussionRenamedPost",["flarum/components/EventPost"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]}],execute:function(){n=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"icon",value:function(){return"pencil"}},{key:"descriptionKey",value:function(){return"core.discussion_renamed_post"}},{key:"descriptionData",value:function(){var e=this.props.post,t=e.content()[0],n=e.content()[1];return{old:m("strong",{className:"DiscussionRenamedPost-old"},t),"new":m("strong",{className:"DiscussionRenamedPost-new"},n)}}}]),t}(t),e("default",n)}}}),System.register("flarum/components/DiscussionsSearchSource",["flarum/helpers/highlight","flarum/components/LinkButton"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(){function e(){babelHelpers.classCallCheck(this,e),this.results={}}return babelHelpers.createClass(e,[{key:"search",value:function(e){var t=this;this.results[e]=[];var n={filter:{q:e},page:{limit:3},include:"relevantPosts,relevantPosts.discussion,relevantPosts.user"};return app.store.find("discussions",n).then(function(n){return t.results[e]=n})}},{key:"view",value:function(e){var s=this.results[e]||[];return[m("li",{className:"Dropdown-header"},app.trans("core.discussions")),m("li",null,n.component({icon:"search",children:app.trans("core.search_all_discussions",{query:e}),href:app.route("index",{q:e})})),s.map(function(n){var s=n.relevantPosts(),r=s&&s[0];return m("li",{className:"DiscussionSearchResult","data-index":"discussions"+n.id()},m("a",{href:app.route.discussion(n,r&&r.number()),config:m.route},m("div",{className:"DiscussionSearchResult-title"},t(n.title(),e)),r?m("div",{className:"DiscussionSearchResult-excerpt"},t(r.contentPlain(),e,100)):""))})]}}]),e}(),e("default",s)}}}),System.register("flarum/components/DiscussionsUserPage",["flarum/components/UserPage","flarum/components/DiscussionList"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.loadUser(m.route.param("username"))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"content",value:function(){return m("div",{className:"DiscussionsUserPage"},n.component({params:{q:"author:"+this.user.username()}}))}}]),t}(t),e("default",s)}}}),System.register("flarum/components/EditPostComposer",["flarum/components/ComposerBody","flarum/helpers/icon"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){var e=this;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,s=Array(n),r=0;n>r;r++)s[r]=arguments[r];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,s),this.editor.props.preview=function(){m.route(app.route.post(e.props.post))}}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"headerItems",value:function(){var e=babelHelpers.get(Object.getPrototypeOf(t.prototype),"headerItems",this).call(this),s=this.props.post;return e.add("title",m("h3",null,n("pencil")," ",m("a",{href:app.route.discussion(s.discussion(),s.number()),config:m.route},app.trans("core.editing_post",{number:s.number(),discussion:s.discussion().title()})))),e}},{key:"data",value:function(){return{content:this.content()}}},{key:"onsubmit",value:function(){var e=this;this.loading=!0;var t=this.data();this.props.post.save(t).then(function(){app.composer.hide(),m.redraw()},function(){return e.loading=!1})}}],[{key:"initProps",value:function(e){babelHelpers.get(Object.getPrototypeOf(t),"initProps",this).call(this,e),e.submitLabel=e.submitLabel||app.trans("core.save_changes"),e.confirmExit=e.confirmExit||app.trans("core.confirm_discard_edit"),e.originalContent=e.originalContent||e.post.content(),e.user=e.user||e.post.user(),e.post.editedContent=e.originalContent}}]),t}(t),e("default",s)}}}),System.register("flarum/components/EditUserModal",["flarum/components/Modal","flarum/components/Button","flarum/components/GroupBadge","flarum/models/Group"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){var e=this;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,s=Array(n),o=0;n>o;o++)s[o]=arguments[o];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,s);var i=this.props.user;this.username=m.prop(i.username()||""),this.email=m.prop(i.email()||""),this.setPassword=m.prop(!1),this.password=m.prop(i.password()||""),this.groups={},app.store.all("groups").filter(function(e){return-1===[r.GUEST_ID,r.MEMBER_ID].indexOf(e.id())}).forEach(function(t){return e.groups[t.id()]=m.prop(-1!==i.groups().indexOf(t))})}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"className",value:function(){return"EditUserModal Modal--small"}},{key:"title",value:function(){return"Edit User"}},{key:"content",value:function(){var e=this;return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,"Username"),m("input",{className:"FormControl",placeholder:app.trans("core.username"),value:this.username(),onchange:m.withAttr("value",this.username)})),m("div",{className:"Form-group"},m("label",null,"Email"),m("div",null,m("input",{className:"FormControl",placeholder:app.trans("core.email"),value:this.email(),onchange:m.withAttr("value",this.email)}))),m("div",{className:"Form-group"},m("label",null,"Password"),m("div",null,m("label",{className:"checkbox"},m("input",{type:"checkbox",checked:this.setPassword(),onchange:function(t){e.setPassword(t.target.checked),m.redraw(!0),t.target.checked&&e.$("[name=password]").select(),m.redraw.strategy("none")}}),"Set new password"),this.setPassword()?m("input",{className:"FormControl",type:"password",name:"password",placeholder:app.trans("core.password"),value:this.password(),onchange:m.withAttr("value",this.password)}):"")),m("div",{className:"Form-group EditUserModal-groups"},m("label",null,"Groups"),m("div",null,Object.keys(this.groups).map(function(e){return app.store.getById("groups",e)}).map(function(t){return m("label",{className:"checkbox"},m("input",{type:"checkbox",checked:e.groups[t.id()](),disabled:"1"===e.props.user.id()&&t.id()===r.ADMINISTRATOR_ID,onchange:m.withAttr("checked",e.groups[t.id()])}),s.component({group:t,label:""})," ",t.nameSingular())}))),m("div",{className:"Form-group"},n.component({className:"Button Button--primary",type:"submit",loading:this.loading,children:app.trans("core.save_changes")}))))}},{key:"onsubmit",value:function(e){var t=this;e.preventDefault(),this.loading=!0;var n=Object.keys(this.groups).filter(function(e){return t.groups[e]()}).map(function(e){return app.store.getById("groups",e)}),s={username:this.username(),email:this.email(),relationships:{groups:n}};this.setPassword()&&(s.password=this.password()),this.props.user.save(s).then(function(){return t.hide()},function(e){t.loading=!1,t.handleErrors(e)})}}]),t}(t),e("default",o)}}}),System.register("flarum/components/EventPost",["flarum/components/Post","flarum/utils/string","flarum/helpers/username","flarum/helpers/icon"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e.ucfirst},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"attrs",value:function(){return{className:"EventPost "+n(this.props.post.contentType())+"Post"}}},{key:"content",value:function(){var e=this.props.post.user(),t=s(e),n=babelHelpers._extends(this.descriptionData(),{user:e,username:e?m("a",{className:"EventPost-user",href:app.route.user(e),config:m.route},t):t});return[r(this.icon(),{className:"EventPost-icon"}),m("div",{"class":"EventPost-info"},app.trans(this.descriptionKey(),n))]}},{key:"icon",value:function(){return""}},{key:"descriptionKey",value:function(){return""}},{key:"descriptionData",value:function(){return{}}}]),t}(t),e("default",o)}}}),System.register("flarum/components/ForgotPasswordModal",["flarum/components/Modal","flarum/components/Alert","flarum/components/Button"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]}],execute:function(){r=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.email=m.prop(this.props.email||""),this.success=!1}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"className",value:function(){return"ForgotPasswordModal Modal--small"}},{key:"title",value:function(){return app.trans("core.forgot_password")}},{key:"content",value:function(){if(this.success){var e=this.email().split("@")[1];return m("div",{className:"Modal-body"},m("div",{className:"Form Form--centered"},m("p",{className:"helpText"},app.trans("core.password_reset_email_sent")),m("div",{className:"Form-group"},m("a",{href:"http://"+e,className:"Button Button--primary Button--block"},app.trans("core.go_to",{location:e})))))}return m("div",{className:"Modal-body"},m("div",{className:"Form Form--centered"},m("p",{className:"helpText"},app.trans("core.forgot_password_help")),m("div",{className:"Form-group"},m("input",{className:"FormControl",name:"email",type:"email",placeholder:app.trans("core.email"),value:this.email(),onchange:m.withAttr("value",this.email),disabled:this.loading})),m("div",{className:"Form-group"},s.component({className:"Button Button--primary Button--block",type:"submit",loading:this.loading,children:app.trans("core.recover_password")}))))}},{key:"onsubmit",value:function(e){var t=this;e.preventDefault(),this.loading=!0,app.request({method:"POST",url:app.forum.attribute("apiUrl")+"/forgot",data:{email:this.email()},handlers:{404:function(){throw t.alert=new n({type:"warning",message:"That email wasn't found in our database."}),new Error}}}).then(function(){t.loading=!1,t.success=!0,t.alert=null,m.redraw()},function(e){t.loading=!1,t.handleErrors(e)})}}]),t}(t),e("default",r)}}}),System.register("flarum/components/HeaderPrimary",["flarum/Component","flarum/utils/ItemList","flarum/helpers/listItems","flarum/components/SelectDropdown","flarum/components/Button"],function(e){"use strict";var t,n,s,r,o,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]}],execute:function(){i=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return m("ul",{className:"Header-controls"},s(this.items().toArray()))}},{key:"items",value:function(){return new n}}]),t}(t),e("default",i)}}}),System.register("flarum/components/HeaderSecondary",["flarum/Component","flarum/components/Button","flarum/components/LogInModal","flarum/components/SignUpModal","flarum/components/SessionDropdown","flarum/components/SelectDropdown","flarum/components/NotificationsDropdown","flarum/utils/ItemList","flarum/helpers/listItems"],function(e){"use strict";var t,n,s,r,o,i,a,u,l,c;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]},function(e){u=e["default"]},function(e){l=e["default"]}],execute:function(){c=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return m("ul",{className:"Header-controls"},l(this.items().toArray()))}},{key:"items",value:function c(){var c=new u;if(c.add("search",app.search.render(),30),Object.keys(app.locales).length>1){var e=[],t=function(t){e.push(n.component({active:app.locale===t,children:app.locales[t],icon:app.locale===t?"check":!0,onclick:function(){app.session.user?app.session.user.savePreferences({locale:t}).then(function(){return window.location.reload()}):(document.cookie="locale="+t+"; path=/; expires=Tue, 19 Jan 2038 03:14:07 GMT",window.location.reload())}}))};for(var l in app.locales)t(l);c.add("locale",i.component({children:e,buttonClassName:"Button Button--link"}),20)}return app.session.user?(c.add("notifications",a.component(),10),c.add("session",o.component(),0)):(app.forum.attribute("allowSignUp")&&c.add("signUp",n.component({children:app.trans("core.sign_up"),className:"Button Button--link",onclick:function(){return app.modal.show(new r)}}),10),c.add("logIn",n.component({children:app.trans("core.log_in"),className:"Button Button--link",onclick:function(){return app.modal.show(new s)}}),0)),c}}]),t}(t),e("default",c)}}}),System.register("flarum/components/IndexPage",["flarum/extend","flarum/components/Page","flarum/utils/ItemList","flarum/helpers/listItems","flarum/components/DiscussionList","flarum/components/WelcomeHero","flarum/components/DiscussionComposer","flarum/components/LogInModal","flarum/components/DiscussionPage","flarum/components/Select","flarum/components/Button","flarum/components/LinkButton","flarum/components/SelectDropdown"],function(e){"use strict";var t,n,s,r,o,i,a,u,l,c,p,f,d,h;return{setters:[function(e){t=e.extend},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]},function(e){u=e["default"]},function(e){l=e["default"]},function(e){c=e["default"]},function(e){p=e["default"]},function(e){f=e["default"]},function(e){d=e["default"]}],execute:function(){h=function(e){function n(){babelHelpers.classCallCheck(this,n);for(var e=arguments.length,t=Array(e),s=0;e>s;s++)t[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,t),app.previous instanceof l&&(this.lastDiscussion=app.previous.discussion),app.previous instanceof n&&(app.cache.discussionList=null);var r=this.params();app.cache.discussionList&&Object.keys(r).some(function(e){return app.cache.discussionList.props.params[e]!==r[e]?(app.cache.discussionList=null,!0):void 0}),app.cache.discussionList||(app.cache.discussionList=new o({params:r})),app.history.push("index"),this.bodyClass="App--index"}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"onunload",value:function(){app.cache.scrollTop=$(window).scrollTop()}},{key:"view",value:function(){return m("div",{className:"IndexPage"},this.hero(),m("div",{className:"container"},m("nav",{className:"IndexPage-nav sideNav"},m("ul",null,r(this.sidebarItems().toArray()))),m("div",{className:"IndexPage-results sideNavOffset"},m("div",{className:"IndexPage-toolbar"},m("ul",{className:"IndexPage-toolbar-view"},r(this.viewItems().toArray())),m("ul",{className:"IndexPage-toolbar-action"},r(this.actionItems().toArray()))),app.cache.discussionList.render())))}},{key:"config",value:function(e,s){if(babelHelpers.get(Object.getPrototypeOf(n.prototype),"config",this).apply(this,arguments),!e){t(s,"onunload",function(){return $("#app").css("min-height","")}),app.setTitle(""),app.setTitleCount(0);var r=this.$(".Hero").outerHeight(),o=app.cache.scrollTop;if($("#app").css("min-height",$(window).height()+r),$(window).scrollTop(o-(app.cache.heroHeight-r)),app.cache.heroHeight=r,this.lastDiscussion){var i=this.$('.DiscussionListItem[data-id="'+this.lastDiscussion.id()+'"]');if(i.length){var a=$("#header").outerHeight(),u=$(window).height(),l=i.offset().top,c=l+i.outerHeight();(o+a>l||c>o+u)&&$(window).scrollTop(l-a)}}}}},{key:"hero",value:function(){return i.component()}},{key:"sidebarItems",value:function(){var e=new s,t=app.forum.canStartDiscussion()||!app.session.user;return e.add("newDiscussion",p.component({children:t?app.trans("core.start_a_discussion"):"Can't Start Discussion",icon:"edit",className:"Button Button--primary IndexPage-newDiscussion",itemClassName:"App-primaryControl",onclick:this.newDiscussion.bind(this),disabled:!t})),e.add("nav",d.component({children:this.navItems(this).toArray(),buttonClassName:"Button",className:"App-titleControl"})),e}},{key:"navItems",value:function(){var e=new s,t=this.stickyParams();return e.add("allDiscussions",f.component({href:app.route("index",t),children:app.trans("core.all_discussions"),icon:"comments-o"}),100),e}},{key:"viewItems",value:function(){var e=new s,t={};for(var n in app.cache.discussionList.sortMap())t[n]=app.trans("core.sort_"+n);return e.add("sort",c.component({options:t,value:this.params().sort,onchange:this.changeSort.bind(this)})),e}},{key:"actionItems",value:function(){var e=new s;return e.add("refresh",p.component({title:app.trans("core.refresh"),icon:"refresh",className:"Button Button--icon",onclick:function(){return app.cache.discussionList.refresh()}})),app.session.user&&e.add("markAllAsRead",p.component({title:app.trans("core.mark_all_as_read"),icon:"check",className:"Button Button--icon",onclick:this.markAllAsRead.bind(this)})),e}},{key:"searching",value:function(){return this.params().q}},{key:"clearSearch",value:function(){var e=this.params();delete e.q,m.route(app.route(this.props.routeName,e))}},{key:"changeSort",value:function(e){var t=this.params();e===Object.keys(app.cache.discussionList.sortMap())[0]?delete t.sort:t.sort=e,m.route(app.route(this.props.routeName,t))}},{key:"stickyParams",value:function(){return{sort:m.route.param("sort"),q:m.route.param("q")}}},{key:"params",value:function h(){var h=this.stickyParams();return h.filter=m.route.param("filter"),h}},{key:"newDiscussion",value:function(){var e=m.deferred();return app.session.user?this.composeNewDiscussion(e):app.modal.show(new u({onlogin:this.composeNewDiscussion.bind(this,e)})),e.promise}},{key:"composeNewDiscussion",value:function(e){var t=new a({user:app.session.user});return app.composer.load(t),app.composer.show(),e.resolve(t),e.promise}},{key:"markAllAsRead",value:function(){app.session.user.save({readTime:new Date})}}]),n}(n),e("default",h)}}}),System.register("flarum/components/LoadingPost",["flarum/Component","flarum/helpers/avatar"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return m("div",{className:"Post CommentPost LoadingPost"},m("header",{className:"Post-header"},n(null,{className:"PostUser-avatar"}),m("div",{className:"fakeText"})),m("div",{className:"Post-body"},m("div",{className:"fakeText"}),m("div",{className:"fakeText"}),m("div",{className:"fakeText"})))}}]),t}(t),e("default",s)}}}),System.register("flarum/components/LogInModal",["flarum/components/Modal","flarum/components/ForgotPasswordModal","flarum/components/SignUpModal","flarum/components/Alert","flarum/components/Button"],function(e){"use strict";var t,n,s,r,o,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]}],execute:function(){i=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.email=m.prop(this.props.email||""),this.password=m.prop(this.props.password||"")}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"className",value:function(){return"LogInModal Modal--small"}},{key:"title",value:function(){return app.trans("core.log_in")}},{key:"content",value:function(){return[m("div",{className:"Modal-body"},m("div",{className:"Form Form--centered"},m("div",{className:"Form-group"},m("input",{className:"FormControl",name:"email",placeholder:app.trans("core.username_or_email"),value:this.email(),onchange:m.withAttr("value",this.email),disabled:this.loading})),m("div",{className:"Form-group"},m("input",{className:"FormControl",name:"password",type:"password",placeholder:app.trans("core.password"),value:this.password(),onchange:m.withAttr("value",this.password),disabled:this.loading})),m("div",{className:"Form-group"},o.component({className:"Button Button--primary Button--block",type:"submit",loading:this.loading,children:app.trans("core.log_in")})))),m("div",{className:"Modal-footer"},m("p",{className:"LogInModal-forgotPassword"},m("a",{onclick:this.forgotPassword.bind(this)},app.trans("core.forgot_password_link"))),app.forum.attribute("allowSignUp")?m("p",{className:"LogInModal-signUp"},app.trans("core.before_sign_up_link")," ",m("a",{onclick:this.signUp.bind(this)},app.trans("core.sign_up"))):"")]}},{key:"forgotPassword",value:function(){var e=this.email(),t=-1!==e.indexOf("@")?{email:e}:void 0;app.modal.show(new n(t))}},{key:"signUp",value:function(){var e={password:this.password()},t=this.email();e[-1!==t.indexOf("@")?"email":"username"]=t,app.modal.show(new s(e))}},{key:"onready",value:function(){this.$("[name="+(this.email()?"password":"email")+"]").select()}},{key:"onsubmit",value:function(e){var t=this;e.preventDefault(),this.loading=!0;var n=this.email(),s=this.password();app.session.login(n,s).then(null,function(e){
t.loading=!1,e&&"confirm_email"===e.code?t.alert=r.component({children:app.trans("core.email_confirmation_required",{email:e.email})}):t.alert=r.component({type:"error",children:app.trans("core.invalid_login")}),m.redraw(),t.onready()})}}]),t}(t),e("default",i)}}}),System.register("flarum/components/Notification",["flarum/Component","flarum/helpers/avatar","flarum/helpers/icon","flarum/helpers/humanTime"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this.props.notification,t=this.href();return m("a",{className:"Notification Notification--"+e.contentType()+" "+(e.isRead()?"":"unread"),href:t,config:function(e,n){-1===t.indexOf("://")&&m.route.apply(this,arguments),n||$(e).click(this.markAsRead.bind(this))}},n(e.sender()),s(this.icon(),{className:"Notification-icon"}),m("span",{className:"Notification-content"},this.content()),r(e.time()),m("div",{className:"Notification-excerpt"},this.excerpt()))}},{key:"icon",value:function(){}},{key:"href",value:function(){}},{key:"content",value:function(){}},{key:"excerpt",value:function(){}},{key:"markAsRead",value:function(){this.props.notification.save({isRead:!0})}}]),t}(t),e("default",o)}}}),System.register("flarum/components/NotificationGrid",["flarum/Component","flarum/components/Checkbox","flarum/helpers/icon","flarum/utils/ItemList"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){var e=this;babelHelpers.classCallCheck(this,t);for(var s=arguments.length,r=Array(s),o=0;s>o;o++)r[o]=arguments[o];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r),this.methods=[{name:"alert",icon:"bell",label:app.trans("core.alert")},{name:"email",icon:"envelope-o",label:app.trans("core.email")}],this.inputs={},this.types=this.notificationTypes().toArray(),this.types.forEach(function(t){e.methods.forEach(function(s){var r=e.preferenceKey(t.name,s.name),o=e.props.user.preferences()[r];e.inputs[r]=new n({state:!!o,disabled:"undefined"==typeof o,onchange:function(){return e.toggle([r])}})})})}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this;return m("table",{className:"NotificationGrid"},m("thead",null,m("tr",null,m("td",null),this.methods.map(function(t){return m("th",{className:"NotificationGrid-groupToggle",onclick:e.toggleMethod.bind(e,t.name)},s(t.icon)," ",t.label)}))),m("tbody",null,this.types.map(function(t){return m("tr",null,m("td",{className:"NotificationGrid-groupToggle",onclick:e.toggleType.bind(e,t.name)},s(t.icon)," ",t.label),e.methods.map(function(n){return m("td",{className:"NotificationGrid-checkbox"},e.inputs[e.preferenceKey(t.name,n.name)].render())}))})))}},{key:"config",value:function(e){e||(this.$("thead .NotificationGrid-groupToggle").bind("mouseenter mouseleave",function(e){var t=parseInt($(this).index(),10)+1;$(this).parents("table").find("td:nth-child("+t+")").toggleClass("highlighted","mouseenter"===e.type)}),this.$("tbody .NotificationGrid-groupToggle").bind("mouseenter mouseleave",function(e){$(this).parent().find("td").toggleClass("highlighted","mouseenter"===e.type)}))}},{key:"toggle",value:function(e){var t=this,n=this.props.user,s=n.preferences(),r=!s[e[0]];e.forEach(function(e){var n=t.inputs[e];n.loading=!0,s[e]=n.props.state=r}),m.redraw(),n.save({preferences:s}).then(function(){e.forEach(function(e){return t.inputs[e].loading=!1}),m.redraw()})}},{key:"toggleMethod",value:function(e){var t=this,n=this.types.map(function(n){return t.preferenceKey(n.name,e)}).filter(function(e){return!t.inputs[e].props.disabled});this.toggle(n)}},{key:"toggleType",value:function(e){var t=this,n=this.methods.map(function(n){return t.preferenceKey(e,n.name)}).filter(function(e){return!t.inputs[e].props.disabled});this.toggle(n)}},{key:"preferenceKey",value:function(e,t){return"notify_"+e+"_"+t}},{key:"notificationTypes",value:function(){var e=new r;return e.add("discussionRenamed",{name:"discussionRenamed",icon:"pencil",label:app.trans("core.notify_discussion_renamed")}),e}}]),t}(t),e("default",o)}}}),System.register("flarum/components/NotificationList",["flarum/Component","flarum/helpers/listItems","flarum/components/Button","flarum/components/LoadingIndicator","flarum/models/Discussion"],function(e){"use strict";var t,n,s,r,o,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]}],execute:function(){i=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.loading=!1}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=[];return app.cache.notifications&&!function(){var t={};app.cache.notifications.forEach(function(n){var s=n.subject();if("undefined"!=typeof s){var r=!1;s instanceof o?r=s:s&&s.discussion&&(r=s.discussion());var i=r?r.id():0;t[i]=t[i]||{discussion:r,notifications:[]},t[i].notifications.push(n),-1===e.indexOf(t[i])&&e.push(t[i])}})}(),m("div",{className:"NotificationList"},m("div",{className:"NotificationList-header"},m("div",{className:"App-primaryControl"},s.component({className:"Button Button--icon Button--link",icon:"check",title:app.trans("core.mark_all_as_read"),onclick:this.markAllAsRead.bind(this)})),m("h4",{className:"App-titleControl App-titleControl--text"},app.trans("core.notifications"))),m("div",{className:"NotificationList-content"},e.length?e.map(function(e){var t=e.discussion&&e.discussion.badges().toArray();return m("div",{className:"NotificationGroup"},e.discussion?m("a",{className:"NotificationGroup-header",href:app.route.discussion(e.discussion),config:m.route},t&&t.length?m("ul",{className:"NotificationGroup-badges badges"},n(t)):"",e.discussion.title()):m("div",{className:"NotificationGroup-header"},app.forum.attribute("title")),m("ul",{className:"NotificationGroup-content"},e.notifications.map(function(e){var t=app.notificationComponents[e.contentType()];return t?m("li",null,t.component({notification:e})):""})))}):this.loading?r.component({className:"LoadingIndicator--block"}):m("div",{className:"NotificationList-empty"},app.trans("core.no_notifications"))))}},{key:"load",value:function(){var e=this;(!app.cache.notifications||app.session.user.unreadNotificationsCount())&&(this.loading=!0,m.redraw(),app.store.find("notifications").then(function(t){app.session.user.pushAttributes({unreadNotificationsCount:0}),app.cache.notifications=t.sort(function(e,t){return t.time()-e.time()}),e.loading=!1,m.redraw()}))}},{key:"markAllAsRead",value:function(){app.cache.notifications&&app.cache.notifications.forEach(function(e){e.isRead()||e.save({isRead:!0})})}}]),t}(t),e("default",i)}}}),System.register("flarum/components/NotificationsDropdown",["flarum/components/Dropdown","flarum/helpers/icon","flarum/components/NotificationList"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]}],execute:function(){r=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.showing=!1,this.list=new s}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"initProps",value:function(e){e.className=e.className||"NotificationsDropdown",e.buttonClassName=e.buttonClassName||"Button Button--flat",e.menuClassName=e.menuClassName||"Dropdown-menu--right",e.label=e.label||app.trans("core.notifications"),e.icon=e.icon||"bell",babelHelpers.get(Object.getPrototypeOf(t),"initProps",this).call(this,e)}}]),babelHelpers.createClass(t,[{key:"getButton",value:function(){var e=this.getUnreadCount(),n=babelHelpers.get(Object.getPrototypeOf(t.prototype),"getButton",this).call(this);return n.attrs.className+=e?" unread":"",n.attrs.onclick=this.onclick.bind(this),n}},{key:"getButtonContent",value:function(){var e=this.getUnreadCount();return[n(this.props.icon,{className:"Button-icon"}),e?m("span",{className:"NotificationsDropdown-unread"},e):"",m("span",{className:"Button-label"},this.props.label)]}},{key:"getMenu",value:function(){return m("div",{className:"Dropdown-menu "+this.props.menuClassName,onclick:this.menuClick.bind(this)},this.showing?this.list.render():"")}},{key:"onclick",value:function(){app.drawer.isOpen()?this.goToRoute():(this.showing=!0,this.list.load())}},{key:"goToRoute",value:function(){m.route(app.route("notifications"))}},{key:"getUnreadCount",value:function(){return app.session.user.unreadNotificationsCount()}},{key:"menuClick",value:function(e){(e.shiftKey||e.metaKey||e.ctrlKey||2===e.which)&&e.stopPropagation()}}]),t}(t),e("default",r)}}}),System.register("flarum/components/NotificationsPage",["flarum/components/Page","flarum/components/NotificationList"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,s=Array(e),r=0;e>r;r++)s[r]=arguments[r];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,s),app.history.push("notifications"),this.list=new n,this.list.load(),this.bodyClass="App--notifications"}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return m("div",{className:"NotificationsPage"},this.list.render())}}]),t}(t),e("default",s)}}}),System.register("flarum/components/Page",["flarum/Component"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]}],execute:function(){n=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),app.previous=app.current,app.current=this,app.drawer.hide(),app.modal.close(),this.bodyClass=""}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"config",value:function(e,t){var n=this;e||this.bodyClass&&($("#app").addClass(this.bodyClass),t.onunload=function(){return $("#app").removeClass(n.bodyClass)})}}]),t}(t),e("default",n)}}}),System.register("flarum/components/Post",["flarum/Component","flarum/utils/SubtreeRetainer","flarum/components/Dropdown","flarum/utils/PostControls"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){var e=this;babelHelpers.classCallCheck(this,t);for(var s=arguments.length,r=Array(s),o=0;s>o;o++)r[o]=arguments[o];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r),this.subtree=new n(function(){return e.props.post.freshness},function(){var t=e.props.post.user();return t&&t.freshness})}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this,t=this.attrs();return t.className="Post "+(t.className||""),m("article",t,this.subtree.retain()||function(){var t=r.controls(e.props.post,e).toArray();return m("div",null,t.length?s.component({children:t,className:"Post-controls",buttonClassName:"Button Button--icon Button--flat",menuClassName:"Dropdown-menu--right",icon:"ellipsis-v"}):"",e.content())}())}},{key:"attrs",value:function(){return{}}},{key:"content",value:function(){return""}}]),t}(t),e("default",o)}}}),System.register("flarum/components/PostEdited",["flarum/Component","flarum/helpers/icon","flarum/utils/humanTime","flarum/utils/extractText"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this.props.post,t=e.editUser(),o=r(app.trans("core.post_edited",{user:t,ago:s(e.editTime())}));return m("span",{className:"PostEdited",title:o},n("pencil"))}},{key:"config",value:function(e){e||this.$().tooltip()}}]),t}(t),e("default",o)}}}),System.register("flarum/components/PostMeta",["flarum/Component","flarum/helpers/humanTime","flarum/helpers/fullTime"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]}],execute:function(){r=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this.props.post,t=e.time(),r=window.location.origin+app.route.post(e),o="ontouchstart"in document.documentElement,i=function(){var e=this;setTimeout(function(){return $(e).parent().find(".PostMeta-permalink").select()}),m.redraw.strategy("none")};return m("div",{className:"Dropdown PostMeta"},m("a",{className:"Dropdown-toggle",onclick:i,"data-toggle":"dropdown"},n(t)),m("div",{className:"Dropdown-menu dropdown-menu"},m("span",{className:"PostMeta-number"},app.trans("core.post_number",{number:e.number()}))," ",s(t),o?m("a",{className:"Button PostMeta-permalink",href:r},r):m("input",{className:"FormControl PostMeta-permalink",value:r,onclick:function(e){return e.stopPropagation()}})))}}]),t}(t),e("default",r)}}}),System.register("flarum/components/PostPreview",["flarum/Component","flarum/helpers/avatar","flarum/helpers/username","flarum/helpers/highlight"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this.props.post,t=e.user(),o=r(e.contentPlain(),this.props.highlight,300);return m("a",{className:"PostPreview",href:app.route.post(e),config:m.route,onclick:this.props.onclick},m("span",{className:"PostPreview-content"},n(t),s(t)," ",m("span",{className:"PostPreview-excerpt"},o)))}}]),t}(t),e("default",o)}}}),System.register("flarum/components/PostStream",["flarum/Component","flarum/utils/ScrollListener","flarum/components/LoadingPost","flarum/utils/anchorScroll","flarum/utils/mixin","flarum/utils/evented","flarum/components/ReplyPlaceholder"],function(e){"use strict";var t,n,s,r,o,i,a,u;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]}],execute:function(){u=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,s=Array(e),r=0;e>r;r++)s[r]=arguments[r];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,s),this.discussion=this.props.discussion,this.paused=!1,this.scrollListener=new n(this.onscroll.bind(this)),this.loadPageTimeouts={},this.pagesLoading=0,this.show(this.props.includedPosts)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"goToNumber",value:function(e,t){var n=this;if("reply"===e)return this.goToLast().then(function(){$("html,body").stop(!0).animate({scrollTop:$(document).height()-$(window).height()},"fast")});this.paused=!0;var s=this.loadNearNumber(e);return m.redraw(!0),s.then(function(){m.redraw(!0),n.scrollToNumber(e,t).done(n.unpause.bind(n))})}},{key:"goToIndex",value:function(e,t,n){var s=this;this.paused=!0;var o=this.loadNearIndex(e);return m.redraw(!0),o.then(function(){r(s.$(".PostStream-item:"+(t?"last":"first")),function(){return m.redraw(!0)}),s.scrollToIndex(e,n,t).done(s.unpause.bind(s))})}},{key:"goToFirst",value:function(){return this.goToIndex(0)}},{key:"goToLast",value:function(){return this.goToIndex(this.count()-1,!0)}},{key:"update",value:function(){this.viewingEnd&&(this.visibleEnd=this.count(),this.loadRange(this.visibleStart,this.visibleEnd).then(function(){return m.redraw()}))}},{key:"count",value:function(){return this.discussion.postIds().length}},{key:"sanitizeIndex",value:function(e){return Math.max(0,Math.min(this.count(),e))}},{key:"show",value:function(e){this.visibleStart=e.length?this.discussion.postIds().indexOf(e[0].id()):0,this.visibleEnd=this.visibleStart+e.length}},{key:"reset",value:function(e,t){this.visibleStart=e||0,this.visibleEnd=this.sanitizeIndex(t||this.constructor.loadCount)}},{key:"posts",value:function(){return this.discussion.postIds().slice(this.visibleStart,this.visibleEnd).map(function(e){var t=app.store.getById("posts",e);return t&&t.discussion()&&t.user()!==!1?t:null})}},{key:"view",value:function(){function e(e,t,n){n.fadedIn||$(e).hide().fadeIn(),n.fadedIn=!0}var t=this,n=void 0;return this.visibleEnd=this.sanitizeIndex(this.visibleEnd),this.viewingEnd=this.visibleEnd===this.count(),m("div",{className:"PostStream"},this.posts().map(function(r,o){var i=void 0,a={"data-index":t.visibleStart+o};if(r){var u=r.time(),l=app.postComponents[r.contentType()];i=l?l.component({post:r}):"",a.key="post"+r.id(),a.config=e,a["data-time"]=u.toISOString(),a["data-number"]=r.number(),a["data-id"]=r.id();var c=u-n;c>3456e5&&(i=[m("div",{className:"PostStream-timeGap"},m("span",null,app.trans("core.period_later",{period:moment.duration(c).humanize()}))),i]),n=u}else a.key=t.visibleStart+o,i=s.component();return m("div",babelHelpers._extends({className:"PostStream-item"},a),i)}),!this.viewingEnd||app.session.user&&!this.discussion.canReply()?"":m("div",{className:"PostStream-item",key:"reply"},a.component({discussion:this.discussion})))}},{key:"config",value:function(e,t){var n=this;e||(setTimeout(function(){return n.scrollListener.start()}),t.onunload=function(){n.scrollListener.stop(),clearTimeout(n.calculatePositionTimeout)})}},{key:"onscroll",value:function(e){if(!this.paused){var t=this.getMarginTop(),n=$(window).height()-t,s=e+t,r=500;if(this.visibleStart>0){var o=this.$(".PostStream-item[data-index="+this.visibleStart+"]");o.length&&o.offset().top>s-r&&this.loadPrevious()}if(this.visibleEnd<this.count()){var o=this.$(".PostStream-item[data-index="+(this.visibleEnd-1)+"]");o.length&&o.offset().top+o.outerHeight(!0)<s+n+r&&this.loadNext()}clearTimeout(this.calculatePositionTimeout),this.calculatePositionTimeout=setTimeout(this.calculatePosition.bind(this),100)}}},{key:"loadNext",value:function(){var e=this.visibleEnd,t=this.visibleEnd=this.sanitizeIndex(this.visibleEnd+this.constructor.loadCount),n=e-2*this.constructor.loadCount;n>this.visibleStart&&n>=0&&(this.visibleStart=n+this.constructor.loadCount+1,this.loadPageTimeouts[n]&&(clearTimeout(this.loadPageTimeouts[n]),this.loadPageTimeouts[n]=null,this.pagesLoading--)),this.loadPage(e,t)}},{key:"loadPrevious",value:function(){var e=this.visibleStart,t=this.visibleStart=this.sanitizeIndex(this.visibleStart-this.constructor.loadCount),n=t+2*this.constructor.loadCount;n<this.visibleEnd&&n<=this.count()&&(this.visibleEnd=n,this.loadPageTimeouts[n]&&(clearTimeout(this.loadPageTimeouts[n]),this.loadPageTimeouts[n]=null,this.pagesLoading--)),this.loadPage(t,e,!0)}},{key:"loadPage",value:function(e,t,n){var s=this,o=function(){if(!(e<s.visibleStart||t>s.visibleEnd)){var o=n?s.visibleEnd-1:s.visibleStart;r('.PostStream-item[data-index="'+o+'"]',function(){return m.redraw(!0)}),s.unpause()}};o(),this.loadPageTimeouts[e]=setTimeout(function(){s.loadRange(e,t).then(function(){o(),s.pagesLoading--}),s.loadPageTimeouts[e]=null},this.pagesLoading?1e3:0),this.pagesLoading++}},{key:"loadRange",value:function(e,t){var n=[],s=[];return this.discussion.postIds().slice(e,t).forEach(function(e){var t=app.store.getById("posts",e);t&&t.discussion()?s.push(t):n.push(e)}),n.length?app.store.find("posts",n):m.deferred().resolve(s).promise}},{key:"loadNearNumber",value:function(e){return this.posts().some(function(t){return t&&Number(t.number())===Number(e)})?m.deferred().resolve().promise:(this.reset(),app.store.find("posts",{filter:{discussion:this.discussion.id()},page:{near:e}}).then(this.show.bind(this)))}},{key:"loadNearIndex",value:function(e){if(e>=this.visibleStart&&e<=this.visibleEnd)return m.deferred().resolve().promise;var t=this.sanitizeIndex(e-this.constructor.loadCount/2),n=t+this.constructor.loadCount;return this.reset(t,n),this.loadRange(t,n).then(this.show.bind(this))}},{key:"calculatePosition",value:function(){var e=this.getMarginTop(),t=$(window),n=t.height()-e,s=t.scrollTop()+e,r=void 0,o=void 0;this.$(".PostStream-item").each(function(){var e=$(this),t=e.offset().top,i=e.outerHeight(!0);if(t+i>s){if(r||(r=e.data("number")),!(s+n>t+i))return!1;e.data("number")&&(o=e.data("number"))}}),r&&this.trigger("positionChanged",r||1,o)}},{key:"getMarginTop",value:function(){return this.$()&&$("#header").outerHeight()+parseInt(this.$().css("margin-top"),10)}},{key:"scrollToNumber",value:function(e,t){var n=this.$(".PostStream-item[data-number="+e+"]");return this.scrollToItem(n,t).done(this.flashItem.bind(this,n))}},{key:"scrollToIndex",value:function(e,t,n){var s=this.$(".PostStream-item[data-index="+e+"]");return this.scrollToItem(s,t,!0,n)}},{key:"scrollToItem",value:function(e,t,n,s){var r=$("html, body").stop(!0);if(e.length){var o=e.offset().top-this.getMarginTop(),i=e.offset().top+e.height(),a=$(document).scrollTop(),u=a+$(window).height();if(n||a>o||i>u){var l=s?i-$(window).height()+app.composer.computedHeight():e.is(":first-child")?0:o;t?r.scrollTop(l):l!==a&&r.animate({scrollTop:l},"fast")}}return r.promise()}},{key:"flashItem",value:function(e){e.addClass("flash").one("animationend webkitAnimationEnd",function(){return e.removeClass("flash")})}},{key:"unpause",value:function(){this.paused=!1,this.scrollListener.update(!0),this.trigger("unpaused")}}]),t}(o(t,i)),u.loadCount=20,e("default",u)}}}),System.register("flarum/components/PostStreamScrubber",["flarum/Component","flarum/helpers/icon","flarum/utils/ScrollListener","flarum/utils/SubtreeRetainer","flarum/utils/computed","flarum/utils/formatNumber"],function(e){"use strict";var t,n,s,r,o,i,a;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]}],execute:function(){a=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),i=0;e>i;i++)n[i]=arguments[i];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.handlers={},this.index=0,this.visible=1,this.description="",this.visibleIndex=o("index","visible","count",function(e,t,n){return Math.min(n,Math.ceil(Math.max(0,e)+t))}),this.props.stream.on("unpaused",this.handlers.streamWasUnpaused=this.streamWasUnpaused.bind(this)),this.scrollListener=new s(this.onscroll.bind(this)),this.subtree=new r(function(){return!0})}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){function e(e,t,n){var s=$(e),o={top:100-100*r+"%",height:100*r+"%"};n.oldStyle?s.stop(!0).css(n.oldStyle).animate(o):s.css(o),n.oldStyle=o}var t=this.subtree.retain(),s=this.props.stream.discussion.unreadCount(),r=Math.min(this.count()-this.index,s)/this.count(),o=app.trans("core.viewing_posts",{index:m("span",{className:"Scrubber-index"},t||i(this.visibleIndex())),count:m("span",{className:"Scrubber-count"},i(this.count()))});return m("div",{className:"PostStreamScrubber Dropdown "+(this.disabled()?"disabled ":"")+(this.props.className||"")},m("button",{className:"Button Dropdown-toggle","data-toggle":"dropdown"},o," ",n("sort")),m("div",{className:"Dropdown-menu dropdown-menu"},m("div",{className:"Scrubber"},m("a",{className:"Scrubber-first",onclick:this.goToFirst.bind(this)},n("angle-double-up")," ",app.trans("core.original_post")),m("div",{className:"Scrubber-scrollbar"},m("div",{className:"Scrubber-before"}),m("div",{className:"Scrubber-handle"},m("div",{className:"Scrubber-bar"}),m("div",{className:"Scrubber-info"},m("strong",null,o),m("span",{"class":"Scrubber-description"},t||this.description))),m("div",{className:"Scrubber-after"}),m("div",{className:"Scrubber-unread",config:e},app.trans("core.unread_posts",{count:s}))),m("a",{className:"Scrubber-last",onclick:this.goToLast.bind(this)},n("angle-double-down")," ",app.trans("core.now")))))}},{key:"goToFirst",value:function(){this.props.stream.goToFirst(),this.index=0,this.renderScrollbar(!0)}},{key:"goToLast",value:function(){this.props.stream.goToLast(),this.index=this.props.stream.count(),this.renderScrollbar(!0)}},{key:"count",value:function(){return this.props.stream.count()}},{key:"streamWasUnpaused",value:function(){this.update(window.pageYOffset),this.renderScrollbar(!0)}},{key:"disabled",value:function(){return this.visible>=this.count()}},{key:"onscroll",value:function(e){var t=this.props.stream;!t.paused&&t.$()&&(this.update(e),this.renderScrollbar())}},{key:"update",value:function(e){var t=this.props.stream,n=t.getMarginTop(),s=e+n,r=$(window).height()-n,o=t.$("> .PostStream-item[data-index]"),i=o.first().data("index")||0,a=0,u="";o.each(function(){var e=$(this),t=e.offset().top,n=e.outerHeight(!0);if(s>t+n)return a=(t+n-s)/n,i=parseFloat(e.data("index"))+1-a,!0;if(t>s+r)return!1;s>=t&&t+n>s?(a=(t+n-s)/n,i=parseFloat(e.data("index"))+1-a):t+n>=s+r?a+=(s+r-t)/n:a++;var o=e.data("time");o&&(u=o)}),this.index=i,this.visible=a,this.description=u?moment(u).format("MMMM YYYY"):""}},{key:"config",value:function(e,t){e||(t.onunload=this.ondestroy.bind(this),this.scrollListener.start(),$(window).on("resize",this.handlers.onresize=this.onresize.bind(this)).resize(),this.$(".Scrubber-scrollbar").bind("click",this.onclick.bind(this)).css({cursor:"pointer","user-select":"none"}).bind("dragstart mousedown touchstart",function(e){return e.preventDefault()}),this.dragging=!1,this.mouseStart=0,this.indexStart=0,this.$(".Scrubber-handle").css("cursor","move").bind("mousedown touchstart",this.onmousedown.bind(this)).click(function(e){return e.stopPropagation()}),$(document).on("mousemove touchmove",this.handlers.onmousemove=this.onmousemove.bind(this)).on("mouseup touchend",this.handlers.onmouseup=this.onmouseup.bind(this)))}},{key:"ondestroy",value:function(){this.scrollListener.stop(),this.props.stream.off("unpaused",this.handlers.streamWasUnpaused),$(window).off("resize",this.handlers.onresize),$(document).off("mousemove touchmove",this.handlers.onmousemove).off("mouseup touchend",this.handlers.onmouseup)}},{key:"renderScrollbar",value:function(e){var t=this.percentPerPost(),n=this.index,s=this.count(),r=this.visible||1,o=this.$();o.find(".Scrubber-index").text(i(this.visibleIndex())),o.find(".Scrubber-description").text(this.description),o.toggleClass("disabled",this.disabled());var a={};a.before=Math.max(0,t.index*Math.min(n,s-r)),a.handle=Math.min(100-a.before,t.visible*r),a.after=100-a.before-a.handle;var u=e?"animate":"css";for(var l in a){var c=o.find(".Scrubber-"+l);c.stop(!0,!0)[u]({height:a[l]+"%"},"fast"),"animate"===u&&c.css("overflow","visible")}}},{key:"percentPerPost",value:function a(){var e=this.count()||1,t=this.visible||1,n=50/this.$(".Scrubber-scrollbar").outerHeight()*100,s=Math.max(100/e,n/t),a=e===t?0:(100-s*t)/(e-t);return{index:a,visible:s}}},{key:"onresize",value:function(){this.scrollListener.update(!0);var e=this.$(),t=this.$(".Scrubber-scrollbar");t.css("max-height",$(window).height()-e.offset().top+$(window).scrollTop()-parseInt($("#app").css("padding-bottom"),10)-(e.outerHeight()-t.outerHeight()))}},{key:"onmousedown",value:function(e){this.mouseStart=e.clientY||e.originalEvent.touches[0].clientY,this.indexStart=this.index,this.dragging=!0,this.props.stream.paused=!0,$("body").css("cursor","move")}},{key:"onmousemove",value:function(e){if(this.dragging){var t=(e.clientY||e.originalEvent.touches[0].clientY)-this.mouseStart,n=t/this.$(".Scrubber-scrollbar").outerHeight()*100,s=n/this.percentPerPost().index,r=Math.min(this.indexStart+s,this.count()-1);this.index=Math.max(0,r),this.renderScrollbar()}}},{key:"onmouseup",value:function(){if(this.dragging){this.mouseStart=0,this.indexStart=0,this.dragging=!1,$("body").css("cursor",""),this.$().removeClass("open");var e=Math.floor(this.index);this.props.stream.goToIndex(e),this.renderScrollbar(!0)}}},{key:"onclick",value:function(e){var t=this.$(".Scrubber-scrollbar"),n=(e.clientY||e.originalEvent.touches[0].clientY)-t.offset().top+$("body").scrollTop(),s=n/t.outerHeight()*100;s-=parseFloat(t.find(".Scrubber-handle")[0].style.height)/2;var r=s/this.percentPerPost().index;r=Math.max(0,Math.min(this.count()-1,r)),this.props.stream.goToIndex(Math.floor(r)),this.index=r,this.renderScrollbar(!0),this.$().removeClass("open")}}]),t}(t),e("default",a)}}}),System.register("flarum/components/PostUser",["flarum/Component","flarum/components/UserCard","flarum/helpers/avatar","flarum/helpers/username","flarum/helpers/listItems"],function(e){"use strict";var t,n,s,r,o,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]}],execute:function(){i=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.cardVisible=!1}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this.props.post,t=e.user();if(!t)return m("div",{className:"PostUser"},m("h3",null,s(t,{className:"PostUser-avatar"})," ",r(t)));var i="";return!e.isHidden()&&this.cardVisible&&(i=n.component({user:t,className:"UserCard--popover",controlsButtonClassName:"Button Button--icon Button--flat"})),m("div",{className:"PostUser"},m("h3",null,m("a",{href:app.route.user(t),config:m.route},s(t,{className:"PostUser-avatar"})," ",r(t))),m("ul",{className:"PostUser-badges badges"},o(t.badges().toArray())),i)}},{key:"config",value:function(e){var t=this;if(!e){var n=void 0;this.$().on("mouseover","h3 a, .UserCard",function(){clearTimeout(n),n=setTimeout(t.showCard.bind(t),500)}).on("mouseout","h3 a, .UserCard",function(){clearTimeout(n),n=setTimeout(t.hideCard.bind(t),250)})}}},{key:"showCard",value:function(){var e=this;this.cardVisible=!0,m.redraw(),setTimeout(function(){return e.$(".UserCard").addClass("in")})}},{key:"hideCard",value:function(){var e=this;this.$(".UserCard").removeClass("in").one("transitionend webkitTransitionEnd oTransitionEnd",function(){e.cardVisible=!1,m.redraw()})}}]),t}(t),e("default",i)}}}),System.register("flarum/components/PostsUserPage",["flarum/components/UserPage","flarum/components/LoadingIndicator","flarum/components/Button","flarum/components/CommentPost"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];
babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.loading=!0,this.moreResults=!1,this.posts=[],this.loadLimit=20,this.loadUser(m.route.param("username"))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"content",value:function(){var e=void 0;return this.loading?e=n.component():this.moreResults&&(e=m("div",{className:"PostsUserPage-loadMore"},s.component({children:app.trans("core.load_more"),className:"Button",onclick:this.loadMore.bind(this)}))),m("div",{className:"PostsUserPage"},m("ul",{className:"PostsUserPage-list"},this.posts.map(function(e){return m("li",null,m("div",{className:"PostsUserPage-discussion"},"In ",m("a",{href:app.route.post(e),config:m.route},e.discussion().title())),r.component({post:e,showDiscussionTitle:!0}))})),e)}},{key:"show",value:function(e){babelHelpers.get(Object.getPrototypeOf(t.prototype),"show",this).call(this,e),this.refresh()}},{key:"refresh",value:function(){this.loading=!0,this.posts=[],m.lazyRedraw(),this.loadResults().then(this.parseResults.bind(this))}},{key:"loadResults",value:function(e){return app.store.find("posts",{filter:{user:this.user.id(),type:"comment"},page:{offset:e,limit:this.loadLimit},sort:"-time"})}},{key:"loadMore",value:function(){this.loading=!0,this.loadResults(this.posts.length).then(this.parseResults.bind(this))}},{key:"parseResults",value:function(e){return this.loading=!1,[].push.apply(this.posts,e),this.moreResults=e.length>=this.loadLimit,m.redraw(),e}}]),t}(t),e("default",o)}}}),System.register("flarum/components/ReplyComposer",["flarum/components/ComposerBody","flarum/components/Alert","flarum/components/Button","flarum/helpers/icon"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){var e=this;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,s=Array(n),r=0;n>r;r++)s[r]=arguments[r];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,s),this.editor.props.preview=function(){m.route(app.route.discussion(e.props.discussion,"reply"))}}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"headerItems",value:function(){var e=babelHelpers.get(Object.getPrototypeOf(t.prototype),"headerItems",this).call(this),n=this.props.discussion;return e.add("title",m("h3",null,r("reply")," ",m("a",{href:app.route.discussion(n),config:m.route},n.title()))),e}},{key:"data",value:function(){return{content:this.content(),relationships:{discussion:this.props.discussion}}}},{key:"onsubmit",value:function(){var e=this,t=this.props.discussion;this.loading=!0,m.redraw();var r=this.data();app.store.createRecord("posts").save(r).then(function(e){app.viewingDiscussion(t)?app.current.stream.update():!function(){var t=void 0,r=s.component({className:"Button Button--link",children:app.trans("core.view"),onclick:function(){m.route(app.route.post(e)),app.alerts.dismiss(t)}});app.alerts.show(t=new n({type:"success",message:app.trans("core.reply_posted"),controls:[r]}))}(),app.composer.hide()},function(t){e.loading=!1,m.redraw(),app.alertErrors(t.errors)})}}],[{key:"initProps",value:function(e){babelHelpers.get(Object.getPrototypeOf(t),"initProps",this).call(this,e),e.placeholder=e.placeholder||app.trans("core.write_a_reply"),e.submitLabel=e.submitLabel||app.trans("core.post_reply"),e.confirmExit=e.confirmExit||app.trans("core.confirm_discard_reply")}}]),t}(t),e("default",o)}}}),System.register("flarum/components/ReplyPlaceholder",["flarum/Component","flarum/helpers/avatar","flarum/helpers/username","flarum/utils/DiscussionControls"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){function e(e){$(this).trigger("click"),e.preventDefault()}var t=this;if(app.composingReplyTo(this.props.discussion))return m("article",{className:"Post CommentPost editing"},m("header",{className:"Post-header"},m("div",{className:"PostUser"},m("h3",null,n(app.session.user,{className:"PostUser-avatar"}),s(app.session.user)))),m("div",{className:"Post-body",config:this.configPreview.bind(this)}));var o=function(){r.replyAction.call(t.props.discussion,!0)};return m("article",{className:"Post ReplyPlaceholder",onclick:o,onmousedown:e},m("header",{className:"Post-header"},n(app.session.user,{className:"PostUser-avatar"})," ",app.trans("core.write_a_reply")))}},{key:"configPreview",value:function(e,t,n){if(!t){var s=void 0,r=setInterval(function(){var t=app.composer.component.content();if(s!==t){s=t;var n=$(window).scrollTop()+$(window).height()>=$(document).height();s9e.TextFormatter.preview(s||"",e),n&&$(window).scrollTop($(document).height())}},50);n.onunload=function(){return clearInterval(r)}}}}]),t}(t),e("default",o)}}}),System.register("flarum/components/Search",["flarum/Component","flarum/components/LoadingIndicator","flarum/utils/ItemList","flarum/utils/classList","flarum/helpers/icon","flarum/components/DiscussionsSearchSource","flarum/components/UsersSearchSource"],function(e){"use strict";var t,n,s,r,o,i,a,u;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]}],execute:function(){u=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.value=m.prop(),this.hasFocus=!1,this.sources=this.sourceItems().toArray(),this.loadingSources=0,this.searched=[],this.index=0}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this,t=this.getCurrentSearch();return"undefined"==typeof this.value()&&this.value(t||""),m("div",{className:"Search "+r({open:this.value()&&this.hasFocus,focused:this.hasFocus,active:!!t,loading:!!this.loadingSources})},m("div",{className:"Search-input"},m("input",{className:"FormControl",placeholder:app.trans("core.search_forum"),value:this.value(),oninput:m.withAttr("value",this.value),onfocus:function(){return e.hasFocus=!0},onblur:function(){return e.hasFocus=!1}}),this.loadingSources?n.component({size:"tiny",className:"Button Button--icon Button--link"}):t?m("button",{className:"Search-clear Button Button--icon Button--link",onclick:this.clear.bind(this)},o("times-circle")):""),m("ul",{className:"Dropdown-menu Search-results"},this.value()&&this.hasFocus?this.sources.map(function(t){return t.view(e.value())}):""))}},{key:"config",value:function(e){var t=this;if(this.setIndex(this.getCurrentNumericIndex()),!e){var n=this;this.$(".Search-results").on("mousedown",function(e){return e.preventDefault()}).on("click",function(){return t.$("input").blur()}).on("mouseenter","> li:not(.Dropdown-header)",function(){n.setIndex(n.selectableItems().index(this))}),this.$("input").on("keydown",function(e){switch(e.which){case 40:case 38:t.setIndex(t.getCurrentNumericIndex()+(40===e.which?1:-1),!0),e.preventDefault();break;case 13:m.route(t.getItem(t.index).find("a").attr("href")),t.$("input").blur();break;case 27:t.clear()}}).on("input focus",function(){var e=this.value.toLowerCase();e&&(clearTimeout(n.searchTimeout),n.searchTimeout=setTimeout(function(){-1===n.searched.indexOf(e)&&(e.length>=3&&n.sources.map(function(t){t.search&&(n.loadingSources++,t.search(e).then(function(){n.loadingSources--,m.redraw()}))}),n.searched.push(e),m.redraw())},250))})}}},{key:"getCurrentSearch",value:function(){return app.current&&"function"==typeof app.current.searching&&app.current.searching()}},{key:"clear",value:function(){this.value(""),this.getCurrentSearch()?app.current.clearSearch():m.redraw()}},{key:"sourceItems",value:function(){var e=new s;return e.add("discussions",new i),e.add("users",new a),e}},{key:"selectableItems",value:function(){return this.$(".Search-results > li:not(.Dropdown-header)")}},{key:"getCurrentNumericIndex",value:function(){return this.selectableItems().index(this.getItem(this.index))}},{key:"getItem",value:function(e){var t=this.selectableItems(),n=t.filter('[data-index="'+e+'"]');return n.length||(n=t.eq(e)),n}},{key:"setIndex",value:function(e,t){var n=this.selectableItems(),s=n.parent(),r=e;0>e?r=n.length-1:e>=n.length&&(r=0);var o=n.removeClass("active").eq(r).addClass("active");if(this.index=o.attr("data-index")||r,t){var i=s.scrollTop(),a=s.offset().top,u=a+s.outerHeight(),l=o.offset().top,c=l+o.outerHeight(),p=void 0;a>l?p=i-a+l-parseInt(s.css("padding-top"),10):c>u&&(p=i-u+c+parseInt(s.css("padding-bottom"),10)),"undefined"!=typeof p&&s.stop(!0).animate({scrollTop:p},100)}}}]),t}(t),e("default",u)}}}),System.register("flarum/components/SearchSource",[],function(e){"use strict";var t;return{setters:[],execute:function(){t=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"search",value:function(){}},{key:"view",value:function(){}}]),e}(),e("default",t)}}}),System.register("flarum/components/SessionDropdown",["flarum/helpers/avatar","flarum/helpers/username","flarum/components/Dropdown","flarum/components/LinkButton","flarum/components/Button","flarum/utils/ItemList","flarum/components/Separator","flarum/models/Group"],function(e){"use strict";var t,n,s,r,o,i,a,u,l;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]},function(e){u=e["default"]}],execute:function(){l=function(e){function s(){babelHelpers.classCallCheck(this,s),babelHelpers.get(Object.getPrototypeOf(s.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(s,e),babelHelpers.createClass(s,[{key:"view",value:function(){return this.props.children=this.items().toArray(),babelHelpers.get(Object.getPrototypeOf(s.prototype),"view",this).call(this)}},{key:"getButtonContent",value:function(){var e=app.session.user;return[t(e)," ",m("span",{className:"Button-label"},n(e))]}},{key:"items",value:function l(){var l=new i,e=app.session.user;return l.add("profile",r.component({icon:"user",children:app.trans("core.profile"),href:app.route.user(e)}),100),l.add("settings",r.component({icon:"cog",children:app.trans("core.settings"),href:app.route("settings")}),50),e.groups().some(function(e){return e.id()===u.ADMINISTRATOR_ID})&&l.add("administration",r.component({icon:"wrench",children:app.trans("core.administration"),href:app.forum.attribute("baseUrl")+"/admin",target:"_blank",config:function(){}}),0),l.add("separator",a.component(),-90),l.add("logOut",o.component({icon:"sign-out",children:app.trans("core.log_out"),onclick:app.session.logout.bind(app.session)}),-100),l}}],[{key:"initProps",value:function(e){babelHelpers.get(Object.getPrototypeOf(s),"initProps",this).call(this,e),e.className="SessionDropdown",e.buttonClassName="Button Button--user Button--flat",e.menuClassName="Dropdown-menu--right"}}]),s}(s),e("default",l)}}}),System.register("flarum/components/SettingsPage",["flarum/components/UserPage","flarum/utils/ItemList","flarum/components/Switch","flarum/components/Button","flarum/components/FieldSet","flarum/components/NotificationGrid","flarum/components/ChangePasswordModal","flarum/components/ChangeEmailModal","flarum/helpers/listItems"],function(e){"use strict";var t,n,s,r,o,i,a,u,l,c;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]},function(e){u=e["default"]},function(e){l=e["default"]}],execute:function(){c=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.show(app.session.user),app.setTitle(app.trans("core.settings"))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"content",value:function(){return m("div",{className:"SettingsPage"},m("ul",null,l(this.settingsItems().toArray())))}},{key:"settingsItems",value:function(){var e=new n;return e.add("account",o.component({label:app.trans("core.account"),className:"Settings-account",children:this.accountItems().toArray()})),e.add("notifications",o.component({label:app.trans("core.notifications"),className:"Settings-notifications",children:[i.component({user:this.user})]})),e.add("privacy",o.component({label:app.trans("core.privacy"),className:"Settings-privacy",children:this.privacyItems().toArray()})),e}},{key:"accountItems",value:function(){var e=new n;return e.add("changePassword",r.component({children:app.trans("core.change_password"),className:"Button",onclick:function(){return app.modal.show(new a)}})),e.add("changeEmail",r.component({children:app.trans("core.change_email"),className:"Button",onclick:function(){return app.modal.show(new u)}})),e}},{key:"preferenceSaver",value:function(e){var t=this;return function(n,s){s&&(s.loading=!0),m.redraw(),t.user.savePreferences(babelHelpers.defineProperty({},e,n)).then(function(){s&&(s.loading=!1),m.redraw()})}}},{key:"privacyItems",value:function(){var e=this,t=new n;return t.add("discloseOnline",s.component({children:app.trans("core.disclose_online"),state:this.user.preferences().discloseOnline,onchange:function(t,n){e.user.pushAttributes({lastSeenTime:null}),e.preferenceSaver("discloseOnline")(t,n)}})),t}}]),t}(t),e("default",c)}}}),System.register("flarum/components/SignUpModal",["flarum/components/Modal","flarum/components/LogInModal","flarum/helpers/avatar","flarum/components/Button"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.username=m.prop(this.props.username||""),this.email=m.prop(this.props.email||""),this.password=m.prop(this.props.password||""),this.welcomeUser=null}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"className",value:function(){return"Modal--small SignUpModal"+(this.welcomeUser?" SignUpModal--success":"")}},{key:"title",value:function(){return app.trans("core.sign_up")}},{key:"content",value:function(){return[m("div",{className:"Modal-body"},this.body()),m("div",{className:"Modal-footer"},this.footer())]}},{key:"body",value:function o(){var o=[m("div",{className:"Form Form--centered"},m("div",{className:"Form-group"},m("input",{className:"FormControl",name:"username",placeholder:app.trans("core.username"),value:this.username(),onchange:m.withAttr("value",this.username),disabled:this.loading})),m("div",{className:"Form-group"},m("input",{className:"FormControl",name:"email",type:"email",placeholder:app.trans("core.email"),value:this.email(),onchange:m.withAttr("value",this.email),disabled:this.loading})),m("div",{className:"Form-group"},m("input",{className:"FormControl",name:"password",type:"password",placeholder:app.trans("core.password"),value:this.password(),onchange:m.withAttr("value",this.password),disabled:this.loading})),m("div",{className:"Form-group"},r.component({className:"Button Button--primary Button--block",type:"submit",loading:this.loading,children:app.trans("core.sign_up")})))];if(this.welcomeUser){var e=this.welcomeUser,t=e.email().split("@")[1],n=function(e,t){t||$(e).hide().fadeIn()};o.push(m("div",{className:"SignUpModal-welcome",style:{background:e.color()},config:n},m("div",{className:"darkenBackground"},m("div",{className:"container"},s(e),m("h3",null,app.trans("core.welcome_user",{user:e})),e.isActivated()?m("p",null,m("button",{className:"Button Button--primary",onclick:this.hide.bind(this)},app.trans("core.dismiss"))):[m("p",null,app.trans("core.confirmation_email_sent",{email:m("strong",null,e.email())})),m("p",null,m("a",{href:"http://"+t,className:"Button Button--primary",target:"_blank"},app.trans("core.go_to",{location:t})))]))))}return o}},{key:"footer",value:function(){return[m("p",{className:"SignUpModal-logIn"},app.trans("core.before_log_in_link")," ",m("a",{onclick:this.logIn.bind(this)},app.trans("core.log_in")))]}},{key:"logIn",value:function(){var e={email:this.email()||this.username(),password:this.password()};app.modal.show(new n(e))}},{key:"onready",value:function(){this.props.username?this.$("[name=email]").select():babelHelpers.get(Object.getPrototypeOf(t.prototype),"onready",this).call(this)}},{key:"onsubmit",value:function(e){var t=this;e.preventDefault(),this.loading=!0;var n=this.submitData();app.store.createRecord("users").save(n).then(function(e){t.welcomeUser=e,t.loading=!1,m.redraw()},function(e){t.loading=!1,t.handleErrors(e.errors)})}},{key:"submitData",value:function(){return{username:this.username(),email:this.email(),password:this.password()}}}]),t}(t),e("default",o)}}}),System.register("flarum/components/TerminalPost",["flarum/Component","flarum/helpers/humanTime"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this.props.discussion,t=this.props.lastPost&&e.repliesCount(),s=e[t?"lastUser":"startUser"](),r=e[t?"lastTime":"startTime"]();return m("span",null,app.trans("core.discussion_"+(t?"replied":"started"),{user:s,ago:n(r)}))}}]),t}(t),e("default",s)}}}),System.register("flarum/components/TextEditor",["flarum/Component","flarum/utils/ItemList","flarum/helpers/listItems","flarum/components/Button"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.value=m.prop(this.props.value||"")}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return m("div",{className:"TextEditor"},m("textarea",{className:"FormControl TextEditor-flexible",config:this.configTextarea.bind(this),oninput:m.withAttr("value",this.oninput.bind(this)),placeholder:this.props.placeholder||"",disabled:!!this.props.disabled,value:this.value()}),m("ul",{className:"TextEditor-controls"},s(this.controlItems().toArray())))}},{key:"configTextarea",value:function(e,t){var n=this;if(!t){var s=function(){n.onsubmit(),m.redraw()};$(e).bind("keydown","meta+return",s),$(e).bind("keydown","ctrl+return",s)}}},{key:"controlItems",value:function(){var e=new n;return e.add("submit",r.component({children:this.props.submitLabel,icon:"check",className:"Button Button--primary",onclick:this.onsubmit.bind(this)})),this.props.preview&&e.add("preview",r.component({icon:"eye",className:"Button Button--icon",onclick:this.props.preview})),e}},{key:"setValue",value:function(e){this.$("textarea").val(e).trigger("input")}},{key:"setSelectionRange",value:function(e,t){var n=this.$("textarea");n[0].setSelectionRange(e,t),n.focus()}},{key:"getSelectionRange",value:function(){var e=this.$("textarea");return[e[0].selectionStart,e[0].selectionEnd]}},{key:"insertAtCursor",value:function(e){var t=this.$("textarea")[0],n=this.value(),s=t?t.selectionStart:n.length;if(this.setValue(n.slice(0,s)+e+n.slice(s)),t){var r=s+e.length;this.setSelectionRange(r,r)}}},{key:"oninput",value:function(e){this.value(e),this.props.onchange(this.value()),m.redraw.strategy("none")}},{key:"onsubmit",value:function(){this.props.onsubmit(this.value())}}]),t}(t),e("default",o)}}}),System.register("flarum/components/UserBio",["flarum/Component","flarum/components/LoadingIndicator","flarum/utils/classList"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]}],execute:function(){r=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.editing=!1,this.loading=!1}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this.props.user,t=void 0;if(this.editing)t=m("textarea",{className:"FormControl",placeholder:app.trans("core.bio_placeholder"),rows:"3",value:e.bio()});else{var r=void 0;if(this.loading)r=m("p",{className:"UserBio-placeholder"},n.component({size:"tiny"}));else{var o=e.bioHtml();o?r=m.trust(o):this.props.editable&&(r=m("p",{className:"UserBio-placeholder"},app.trans("core.bio_placeholder")))}t=m("div",{className:"UserBio-content"},r)}return m("div",{className:"UserBio "+s({editable:this.props.editable,editing:this.editing}),onclick:this.edit.bind(this)},t)}},{key:"edit",value:function(){if(this.props.editable){this.editing=!0,m.redraw();var e=this,t=function(t){t.shiftKey||(t.preventDefault(),e.save($(this).val()))};this.$("textarea").focus().bind("blur",t).bind("keydown","return",t)}}},{key:"save",value:function(e){var t=this,n=this.props.user;n.bio()!==e&&(this.loading=!0,n.save({bio:e}).then(function(){t.loading=!1,m.redraw()})),this.editing=!1,m.redraw()}}]),t}(t),e("default",r)}}}),System.register("flarum/components/UserCard",["flarum/Component","flarum/utils/humanTime","flarum/utils/ItemList","flarum/utils/UserControls","flarum/helpers/avatar","flarum/helpers/username","flarum/helpers/icon","flarum/components/Dropdown","flarum/components/UserBio","flarum/components/AvatarEditor","flarum/helpers/listItems"],function(e){"use strict";var t,n,s,r,o,i,a,u,l,c,p,f;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]},function(e){u=e["default"]},function(e){l=e["default"]},function(e){c=e["default"]},function(e){p=e["default"]}],execute:function(){f=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this.props.user,t=r.controls(e,this).toArray(),n=e.color(),s=e.badges().toArray();return m("div",{className:"UserCard "+(this.props.className||""),style:n?{backgroundColor:n}:""},m("div",{className:"darkenBackground"},m("div",{className:"container"},t.length?u.component({children:t,className:"UserCard-controls App-primaryControl",menuClassName:"Dropdown-menu--right",buttonClassName:this.props.controlsButtonClassName,icon:"ellipsis-v"}):"",m("div",{className:"UserCard-profile"},m("h2",{className:"UserCard-identity"},this.props.editable?[c.component({user:e,className:"UserCard-avatar"}),i(e)]:m("a",{href:app.route.user(e),config:m.route},m("div",{className:"UserCard-avatar"},o(e)),i(e))),s.length?m("ul",{className:"UserCard-badges badges"},p(s)):"",m("ul",{className:"UserCard-info"},p(this.infoItems().toArray()))))))}},{key:"infoItems",value:function(){var e=new s,t=this.props.user,r=t.lastSeenTime();if(e.add("bio",l.component({user:t,editable:this.props.editable})),r){var o=t.isOnline();e.add("lastSeen",m("span",{className:"UserCard-lastSeen"+(o?" online":"")},o?[a("circle")," ",app.trans("core.online")]:[a("clock-o")," ",n(r)]))}return e.add("joined",app.trans("core.joined",{ago:n(t.joinTime())})),e}}]),t}(t),e("default",f)}}}),System.register("flarum/components/UserPage",["flarum/components/Page","flarum/utils/ItemList","flarum/utils/affixSidebar","flarum/components/UserCard","flarum/components/LoadingIndicator","flarum/components/SelectDropdown","flarum/components/LinkButton","flarum/components/Separator","flarum/helpers/listItems"],function(e){"use strict";var t,n,s,r,o,i,a,u,l,c;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]},function(e){u=e["default"]},function(e){l=e["default"]}],execute:function(){c=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.user=null,app.history.push("user"),this.bodyClass="App--user"}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return m("div",{className:"UserPage"},this.user?[r.component({user:this.user,className:"Hero UserHero",editable:this.user.canEdit()||this.user===app.session.user,controlsButtonClassName:"Button"}),m("div",{className:"container"},m("nav",{className:"sideNav UserPage-nav",config:s},m("ul",null,l(this.sidebarItems().toArray()))),m("div",{className:"sideNavOffset UserPage-content"},this.content()))]:[o.component({className:"LoadingIndicator--block"})])}},{key:"content",value:function(){}},{key:"show",value:function(e){this.user=e,app.setTitle(e.username()),m.redraw()}},{key:"loadUser",value:function(e){var t=this,n=e.toLowerCase();app.store.all("users").some(function(e){return e.username().toLowerCase()===n&&e.joinTime()?(t.show(e),!0):void 0}),this.user||app.store.find("users",e).then(this.show.bind(this))}},{key:"sidebarItems",value:function(){var e=new n;return e.add("nav",i.component({children:this.navItems().toArray(),className:"App-titleControl",buttonClassName:"Button"})),e}},{key:"navItems",value:function(){var e=new n,t=this.user;return e.add("posts",a.component({href:app.route("user.posts",{username:t.username()}),children:[app.trans("core.posts"),m("span",{className:"Button-badge"},t.commentsCount())],icon:"comment-o"})),e.add("discussions",a.component({href:app.route("user.discussions",{username:t.username()}),children:[app.trans("core.discussions"),m("span",{className:"Button-badge"},t.discussionsCount())],icon:"reorder"})),app.session.user===t&&(e.add("separator",u.component()),e.add("settings",a.component({href:app.route("settings"),children:app.trans("core.settings"),icon:"cog"}))),e}}]),t}(t),e("default",c)}}}),System.register("flarum/components/UsersSearchSource",["flarum/helpers/highlight","flarum/helpers/avatar"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"search",value:function(e){return app.store.find("users",{filter:{q:e},page:{limit:5}})}},{key:"view",value:function(e){var s=app.store.all("users").filter(function(t){return t.username().toLowerCase().substr(0,e.length)===e});return s.length?[m("li",{className:"Dropdown-header"},app.trans("core.users")),s.map(function(s){return m("li",{className:"UserSearchResult","data-index":"users"+s.id()},m("a",{href:app.route.user(s),config:m.route},n(s),t(s.username(),e)))})]:""}}]),e}(),e("default",s)}}}),System.register("flarum/components/WelcomeHero",["flarum/Component","flarum/components/Button"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.hidden=localStorage.getItem("welcomeHidden")}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this;if(this.hidden)return m("div",null);var t=function(){e.$().slideUp(e.hide.bind(e))};return m("header",{className:"Hero WelcomeHero"},m("div",{"class":"container"},n.component({icon:"times",onclick:t,className:"Hero-close Button Button--icon Button--link"}),m("div",{className:"containerNarrow"},m("h2",{className:"Hero-title"},app.forum.attribute("welcomeTitle")),m("div",{className:"Hero-subtitle"},m.trust(app.forum.attribute("welcomeMessage"))))))}},{key:"hide",value:function(){localStorage.setItem("welcomeHidden","true"),this.hidden=!0}}]),t}(t),e("default",s)}}}),System.register("flarum/initializers/boot",["flarum/utils/ScrollListener","flarum/utils/Pane","flarum/utils/Drawer","flarum/utils/mapRoutes","flarum/components/Navigation","flarum/components/HeaderPrimary","flarum/components/HeaderSecondary","flarum/components/Composer","flarum/components/ModalManager","flarum/components/AlertManager"],function(e){"use strict";function t(e){var t=e.forum.attribute("defaultRoute");for(var f in e.routes)e.routes[f].path===t&&(e.routes[f].path="/",e.history.push(f,"/"));m.startComputation(),m.mount(document.getElementById("app-navigation"),i.component({className:"App-backControl",drawer:!0})),m.mount(document.getElementById("header-navigation"),i.component()),m.mount(document.getElementById("header-primary"),a.component()),m.mount(document.getElementById("header-secondary"),u.component()),e.pane=new s(document.getElementById("app")),e.drawer=new r,e.composer=m.mount(document.getElementById("composer"),l.component()),e.modal=m.mount(document.getElementById("modal"),c.component()),e.alerts=m.mount(document.getElementById("alerts"),p.component());var d=e.forum.attribute("basePath");m.route.mode="pathname",m.route(document.getElementById("content"),d+"/",o(e.routes,d)),m.endComputation(),$("#home-link").click(function(t){t.ctrlKey||t.metaKey||2===t.which||(t.preventDefault(),e.history.home())}),new n(function(e){var t=$("#app"),n=t.offset().top;t.toggleClass("affix",e>=n).toggleClass("scrolled",e>n)}).start(),$(function(){return FastClick.attach(document.body)}),e.booted=!0}var n,s,r,o,i,a,u,l,c,p;return e("default",t),{setters:[function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]},function(e){u=e["default"]},function(e){l=e["default"]},function(e){c=e["default"]},function(e){p=e["default"]}],execute:function(){}}}),System.register("flarum/initializers/components",["flarum/components/CommentPost","flarum/components/DiscussionRenamedPost","flarum/components/PostedActivity","flarum/components/JoinedActivity","flarum/components/DiscussionRenamedNotification"],function(e){"use strict";function t(e){e.postComponents.comment=n,e.postComponents.discussionRenamed=s,e.notificationComponents.discussionRenamed=i}var n,s,r,o,i;return e("default",t),{setters:[function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]}],execute:function(){}}}),System.register("flarum/initializers/routes",["flarum/components/IndexPage","flarum/components/DiscussionPage","flarum/components/PostsUserPage","flarum/components/DiscussionsUserPage","flarum/components/SettingsPage","flarum/components/NotificationsPage"],function(e){"use strict";var t,n,s,r,o,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){
o=e["default"]},function(e){i=e["default"]}],execute:function(){e("default",function(e){e.routes={index:{path:"/all",component:t.component()},"index.filter":{path:"/:filter",component:t.component()},discussion:{path:"/d/:id",component:n.component()},"discussion.near":{path:"/d/:id/:near",component:n.component()},user:{path:"/u/:username",component:s.component()},"user.posts":{path:"/u/:username",component:s.component()},"user.discussions":{path:"/u/:username/discussions",component:r.component()},settings:{path:"/settings",component:o.component()},notifications:{path:"/notifications",component:i.component()}},e.route.discussion=function(t,n){return e.route(n&&1!==n?"discussion.near":"discussion",{id:t.id()+"-"+t.slug(),near:n&&1!==n?n:void 0})},e.route.post=function(t){return e.route.discussion(t.discussion(),t.number())},e.route.user=function(t){return e.route("user",{username:t.username()})}})}}}),System.register("flarum/utils/DiscussionControls",["flarum/components/DiscussionPage","flarum/components/ReplyComposer","flarum/components/LogInModal","flarum/components/Button","flarum/components/Separator","flarum/utils/ItemList","flarum/utils/extractText"],function(e){"use strict";var t,n,s,r,o,i,a;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]}],execute:function(){e("default",{controls:function(e,t){var n=this,s=new i;return["user","moderation","destructive"].forEach(function(r){var i=n[r+"Controls"](e,t).toArray();i.length&&(i.forEach(function(e){return s.add(e.itemName,e)}),s.add(r+"Separator",o.component()))}),s},userControls:function(e,n){var s=new i;return n instanceof t&&s.add("reply",!app.session.user||e.canReply()?r.component({icon:"reply",children:app.session.user?app.trans("core.reply"):app.trans("core.log_in_to_reply"),onclick:this.replyAction.bind(e,!0,!1)}):r.component({icon:"reply",children:app.trans("core.cannot_reply"),className:"disabled",title:app.trans("core.cannot_reply_help")})),s},moderationControls:function(e){var t=new i;return e.canRename()&&t.add("rename",r.component({icon:"pencil",children:app.trans("core.rename"),onclick:this.renameAction.bind(e)})),t},destructiveControls:function(e){var t=new i;return e.canDelete()&&t.add("delete",r.component({icon:"times",children:app.trans("core.delete"),onclick:this.deleteAction.bind(e)})),t},replyAction:function(e,t){var r=this,o=m.deferred(),i=function(){if(r.canReply()){e&&app.viewingDiscussion(r)&&app.current.stream.goToLast();var s=app.composer.component;(!app.composingReplyTo(r)||t)&&(s=new n({user:app.session.user,discussion:r}),app.composer.load(s)),app.composer.show(),o.resolve(s)}else o.reject()};return app.session.user?i():app.modal.show(new s({onlogin:function(){return app.current.one("loaded",i)}})),o.promise},deleteAction:function(){confirm(a(app.trans("core.confirm_delete_discussion")))&&(this["delete"](),app.cache.discussionList&&app.cache.discussionList.removeDiscussion(this),app.viewingDiscussion(this)&&app.history.back())},renameAction:function(){var e=this,t=this.title(),n=prompt(a(app.trans("core.prompt_rename_discussion")),t);n&&n!==t&&this.save({title:n}).then(function(){app.viewingDiscussion(e)&&app.current.stream.update(),m.redraw()})}})}}}),System.register("flarum/utils/History",[],function(e){"use strict";var t;return{setters:[],execute:function(){t=function(){function e(t){babelHelpers.classCallCheck(this,e),this.stack=[]}return babelHelpers.createClass(e,[{key:"getTop",value:function(){return this.stack[this.stack.length-1]}},{key:"push",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?m.route():arguments[1],n=this.stack[this.stack.length-2];n&&n.name===e&&this.stack.pop();var s=this.getTop();s&&s.name===e?s.url=t:this.stack.push({name:e,url:t})}},{key:"canGoBack",value:function(){return this.stack.length>1}},{key:"back",value:function(){this.stack.pop(),m.route(this.getTop().url)}},{key:"backUrl",value:function(){var e=this.stack[this.stack.length-2];return e.url}},{key:"home",value:function(){this.stack.splice(1),m.route("/")}}]),e}(),e("default",t)}}}),System.register("flarum/utils/Pane",[],function(e){"use strict";var t;return{setters:[],execute:function(){t=function(){function e(t){babelHelpers.classCallCheck(this,e),this.pinnedKey="panePinned",this.$element=$(t),this.pinned="true"===localStorage.getItem(this.pinnedKey),this.active=!1,this.showing=!1,this.render()}return babelHelpers.createClass(e,[{key:"enable",value:function(){this.active=!0,this.render()}},{key:"disable",value:function(){this.active=!1,this.showing=!1,this.render()}},{key:"show",value:function(){clearTimeout(this.hideTimeout),this.showing=!0,this.render()}},{key:"hide",value:function(){this.showing=!1,this.render()}},{key:"onmouseleave",value:function(){this.hideTimeout=setTimeout(this.hide.bind(this),250)}},{key:"togglePinned",value:function(){this.pinned=!this.pinned,localStorage.setItem(this.pinnedKey,this.pinned?"true":"false"),this.render()}},{key:"render",value:function(){this.$element.toggleClass("panePinned",this.pinned).toggleClass("hasPane",this.active).toggleClass("paneShowing",this.showing)}}]),e}(),e("default",t)}}}),System.register("flarum/utils/PostControls",["flarum/components/EditPostComposer","flarum/components/Button","flarum/components/Separator","flarum/utils/ItemList"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){e("default",{controls:function(e,t){var n=this,o=new r;return["user","moderation","destructive"].forEach(function(r){var i=n[r+"Controls"](e,t).toArray();i.length&&(i.forEach(function(e){return o.add(e.itemName,e)}),o.add(r+"Separator",s.component()))}),o},userControls:function(){return new r},moderationControls:function(e){var t=new r;return"comment"===e.contentType()&&e.canEdit()&&(e.isHidden()?t.add("restore",n.component({icon:"reply",children:app.trans("core.restore"),onclick:this.restoreAction.bind(e)})):t.add("edit",n.component({icon:"pencil",children:app.trans("core.edit"),onclick:this.editAction.bind(e)}))),t},destructiveControls:function(e){var t=new r;return"comment"===e.contentType()&&!e.isHidden()&&e.canEdit()?t.add("hide",n.component({icon:"times",children:app.trans("core.delete"),onclick:this.hideAction.bind(e)})):1!==e.number()&&("comment"!==e.contentType()||e.isHidden())&&e.canDelete()&&t.add("delete",n.component({icon:"times",children:app.trans("core.delete_forever"),onclick:this.deleteAction.bind(e)})),t},editAction:function(){app.composer.load(new t({post:this})),app.composer.show()},hideAction:function(){this.save({isHidden:!0}),this.pushAttributes({hideTime:new Date,hideUser:app.session.user})},restoreAction:function(){this.save({isHidden:!1}),this.pushAttributes({hideTime:null,hideUser:null})},deleteAction:function(){this["delete"](),this.discussion().removePost(this.id())}})}}}),System.register("flarum/utils/UserControls",["flarum/components/Button","flarum/components/Separator","flarum/components/EditUserModal","flarum/components/UserPage","flarum/utils/ItemList"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]}],execute:function(){e("default",{controls:function(e,t){var s=this,r=new o;return["user","moderation","destructive"].forEach(function(o){var i=s[o+"Controls"](e,t).toArray();i.length&&(i.forEach(function(e){return r.add(e.itemName,e)}),r.add(o+"Separator",n.component()))}),r},userControls:function(){return new o},moderationControls:function(e){var n=new o;return e.canEdit()&&n.add("edit",t.component({icon:"pencil",children:app.trans("core.edit"),onclick:this.editAction.bind(e)})),n},destructiveControls:function(e){var n=new o;return"1"!==e.id()&&e.canDelete()&&n.add("delete",t.component({icon:"times",children:app.trans("core.delete"),onclick:this.deleteAction.bind(e)})),n},deleteAction:function(){var e=this;confirm("Are you sure you want to delete this user? All of the user's posts will be deleted.")&&this["delete"]().then(function(){app.current instanceof r&&app.current.user===e?app.history.back():window.location.reload()})},editAction:function(){app.modal.show(new s({user:this}))}})}}}),System.register("flarum/utils/affixSidebar",[],function(e){"use strict";function t(e,t){var n=this;if(!t){var s=$(e),r=$("#header"),o=$("#footer");s.outerHeight(!0)>$(window).height()-r.outerHeight(!0)||s.find("> ul").affix({offset:{top:function(){return s.offset().top-r.outerHeight(!0)-parseInt(s.css("margin-top"),10)},bottom:function(){return n.bottom=o.outerHeight(!0)}}})}}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/utils/slidable",[],function(e){"use strict";function t(e){var t=$(e),n=50,s=void 0,r=void 0,o=void 0,i=void 0,a=!1,u=!1,l=0,c=function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];n.duration=n.duration||"fast",n.step=function(e){$(this).css("transform","translate("+e+"px, 0)")},t.find(".Slidable-content").animate({"background-position-x":e},n)},p=function(){c(0,{complete:function(){t.removeClass("sliding"),s.hide(),r.hide(),u=!1}})};return t.find(".Slidable-content").on("touchstart",function(e){s=t.find(".Slidable-underneath--left:not(.disabled)"),r=t.find(".Slidable-underneath--right:not(.disabled)"),o=e.originalEvent.targetTouches[0].clientX,i=e.originalEvent.targetTouches[0].clientY,a=!0,l=0}).on("touchmove",function(e){var c=e.originalEvent.targetTouches[0].clientX,p=e.originalEvent.targetTouches[0].clientY;if(a&&Math.abs(c-o)>Math.abs(p-i)&&(u=!0),a=!1,u){l=c-o;var m=function(e,t){if(e.length){var s="left"===t?l>0:0>l;s&&e.hasClass("Slidable-underneath--elastic")&&(l-=.5*l),e.toggle(s);var r=Math.max(0,Math.min(1,(Math.abs(l)-25)/n));e.find(".icon").css("transform","scale("+r+")")}else l=Math["left"===t?"min":"max"](0,l)};m(s,"left"),m(r,"right"),$(this).css("transform","translate("+l+"px, 0)"),$(this).css("background-position-x",l+"px"),t.toggleClass("sliding",!!l),e.preventDefault()}}).on("touchend",function(){var e=function(e){e.click(),e.hasClass("Slidable-underneath--elastic")?p():c((l>0?1:-1)*t.width())};r.length&&-n>l?e(r):s.length&&l>n?e(s):p(),a=!1,u=!1}),{reset:p}}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/App",["flarum/utils/ItemList","flarum/components/Alert","flarum/Translator","flarum/utils/extract","flarum/utils/patchMithril"],function(e){"use strict";var t,n,s,r,o,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]}],execute:function(){i=function(){function e(){babelHelpers.classCallCheck(this,e),o(window),this.forum=null,this.routes={},this.preload={data:null,document:null,session:null},this.initializers=new t,this.session=null,this.translator=new s,this.store=null,this.cache={},this.booted=!1,this.requestError=null,this.title="",this.titleCount=0}return babelHelpers.createClass(e,[{key:"boot",value:function(){var e=this;this.initializers.toArray().forEach(function(t){return t(e)})}},{key:"preloadedDocument",value:function(){if(app.preload.document){var e=app.store.pushPayload(app.preload.document);return app.preload.document=null,e}return null}},{key:"setTitle",value:function(e){this.title=e,this.updateTitle()}},{key:"setTitleCount",value:function(e){this.titleCount=e,this.updateTitle()}},{key:"updateTitle",value:function(){document.title=(this.titleCount?"("+this.titleCount+") ":"")+(this.title?this.title+" - ":"")+this.forum.attribute("title")}},{key:"request",value:function(e){var t=this;e.config=e.config||this.session.authorize.bind(this.session),e.background=e.background||!0,e.deserialize=e.deserialize||function(e){try{return JSON.parse(e)}catch(t){throw new Error("Oops! Something went wrong on the server. Please reload the page and try again.")}};var s=e.extract;return e.extract=function(e){var t=e.status;if(t>=500&&599>=t)throw new Error("Oops! Something went wrong on the server. Please reload the page and try again.");return s?s(e.responseText):e.responseText.length>0?e.responseText:null},this.alerts.dismiss(this.requestError),m.request(e).then(null,function(e){throw e instanceof Error&&t.alerts.show(t.requestError=new n({type:"error",children:e.message})),e})}},{key:"alertErrors",value:function(e){var t=this;e.forEach(function(e){t.alerts.show(new n({type:"error",children:e.detail}))})}},{key:"route",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=this.routes[e].path.replace(/:([^\/]+)/g,function(e,n){return r(t,n)}),s=m.route.buildQueryString(t),o="pathname"===m.route.mode?app.forum.attribute("basePath"):"";return o+n+(s?"?"+s:"")}},{key:"trans",value:function(e,t){return this.translator.trans(e,t)}}]),e}(),e("default",i)}}}),System.register("flarum/Component",[],function(e){"use strict";var t;return{setters:[],execute:function(){t=function(){function e(t,n){void 0===t&&(t={}),babelHelpers.classCallCheck(this,e),n&&(t.children=n),this.constructor.initProps(t),this.props=t,this.element=null,this.init()}return babelHelpers.createClass(e,[{key:"init",value:function(){}},{key:"onunload",value:function(){}},{key:"render",value:function(){var e=this,t=this.view();t.attrs=t.attrs||{};var n=t.attrs.config;return t.attrs.config=function(){for(var t=arguments.length,s=Array(t),r=0;t>r;r++)s[r]=arguments[r];e.element=s[0],e.config.apply(e,s.slice(1)),n&&n.apply(e,s)},t}},{key:"$",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=$(this.element);return e?t.find(e):t})},{key:"config",value:function(){}},{key:"view",value:function(){throw new Error("Component#view must be implemented by subclass")}}],[{key:"component",value:function(e,t){void 0===e&&(e={});var n=babelHelpers._extends({},e);t&&(n.children=t),this.initProps(n);var s=function(e){return e.props=n,e.render()};s.$original=this.prototype.view;var r={controller:this.bind(void 0,n),view:s,props:n,component:this};return n.key&&(r.attrs={key:n.key}),r}},{key:"initProps",value:function(e){}}]),e}(),e("default",t)}}}),System.register("flarum/Model",[],function(e){"use strict";var t;return{setters:[],execute:function(){t=function(){function e(t,n){void 0===t&&(t={}),babelHelpers.classCallCheck(this,e),this.data=t,this.freshness=new Date,this.exists=!1,this.store=n}return babelHelpers.createClass(e,[{key:"id",value:function(){return this.data.id}},{key:"attribute",value:function(e){return this.data.attributes[e]}},{key:"pushData",value:function(t){for(var n in t)if("object"==typeof t[n]){this.data[n]=this.data[n]||{};for(var s in t[n])t[n][s]instanceof e&&(t[n][s]={data:e.getRelationshipData(t[n][s])}),this.data[n][s]=t[n][s]}else this.data[n]=t[n];this.freshness=new Date}},{key:"pushAttributes",value:function(e){this.pushData({attributes:e})}},{key:"save",value:function(t){var n=this,s={type:this.data.type,id:this.data.id,attributes:t};if(t.relationships){s.relationships={};for(var r in t.relationships){var o=t.relationships[r];s.relationships[r]={data:o instanceof Array?o.map(e.getRelationshipData):e.getRelationshipData(o)}}delete t.relationships}var i=JSON.parse(JSON.stringify(this.data));return this.pushData(s),app.request({method:this.exists?"PATCH":"POST",url:app.forum.attribute("apiUrl")+this.apiEndpoint(),data:{data:s}}).then(function(e){return n.store.data[e.data.type]=n.store.data[e.data.type]||{},n.store.data[e.data.type][e.data.id]=n,n.store.pushPayload(e)},function(e){throw n.pushData(i),e})}},{key:"delete",value:function(e){var t=this;return this.exists?app.request({method:"DELETE",url:app.forum.attribute("apiUrl")+this.apiEndpoint(),data:e}).then(function(){t.exists=!1,t.store.remove(t)}):m.deferred.resolve().promise}},{key:"apiEndpoint",value:function(){return"/"+this.data.type+(this.exists?"/"+this.data.id:"")}}],[{key:"attribute",value:function(e,t){return function(){var n=this.data.attributes&&this.data.attributes[e];return t?t(n):n}}},{key:"hasOne",value:function(e){return function(){if(this.data.relationships){var t=this.data.relationships[e];if(t)return app.store.getById(t.data.type,t.data.id)}return!1}}},{key:"hasMany",value:function(e){return function(){if(this.data.relationships){var t=this.data.relationships[e];if(t)return t.data.map(function(e){return app.store.getById(e.type,e.id)})}return!1}}},{key:"transformDate",value:function(e){return e?new Date(e):null}},{key:"getRelationshipData",value:function(e){return{type:e.data.type,id:e.data.id}}}]),e}(),e("default",t)}}}),System.register("flarum/Session",[],function(e){"use strict";var t;return{setters:[],execute:function(){t=function(){function e(t,n){babelHelpers.classCallCheck(this,e),this.user=n,this.token=t}return babelHelpers.createClass(e,[{key:"login",value:function(e,t){return app.request({method:"POST",url:app.forum.attribute("baseUrl")+"/login",data:{identification:e,password:t}}).then(function(){return window.location.reload()})}},{key:"logout",value:function(){window.location=app.forum.attribute("baseUrl")+"/logout?token="+this.token}},{key:"authorize",value:function(e){e.setRequestHeader("Authorization","Token "+this.token)}}]),e}(),e("default",t)}}}),System.register("flarum/Store",[],function(e){"use strict";var t;return{setters:[],execute:function(){t=function(){function e(t){babelHelpers.classCallCheck(this,e),this.data={},this.models=t}return babelHelpers.createClass(e,[{key:"pushPayload",value:function(e){e.included&&e.included.map(this.pushObject.bind(this));var t=e.data instanceof Array?e.data.map(this.pushObject.bind(this)):this.pushObject(e.data);return t.payload=e,t}},{key:"pushObject",value:function(e){if(!this.models[e.type])return null;var t=this.data[e.type]=this.data[e.type]||{};return t[e.id]?t[e.id].pushData(e):t[e.id]=this.createRecord(e.type,e),t[e.id].exists=!0,t[e.id]}},{key:"find",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],s=n,r=app.forum.attribute("apiUrl")+"/"+e;return t instanceof Array?r+="?ids[]="+t.join("&ids[]="):"object"==typeof t?s=t:t&&(r+="/"+t),app.request({method:"GET",url:r,data:s}).then(this.pushPayload.bind(this))}},{key:"getById",value:function(e,t){return this.data[e]&&this.data[e][t]}},{key:"getBy",value:function(e,t,n){return this.all(e).filter(function(e){return e[t]()===n})[0]}},{key:"all",value:function(e){var t=this.data[e];return t?Object.keys(t).map(function(e){return t[e]}):[]}},{key:"remove",value:function(e){delete this.data[e.data.type][e.id()]}},{key:"createRecord",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.type=t.type||e,new this.models[e](t,this)}}]),e}(),e("default",t)}}}),System.register("flarum/Translator",["flarum/models/User","flarum/helpers/username","flarum/utils/extractText","flarum/utils/extract"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(){function e(){babelHelpers.classCallCheck(this,e),this.translations={}}return babelHelpers.createClass(e,[{key:"plural",value:function(e){return 1===e?"one":"other"}},{key:"trans",value:function(e,t,o){void 0===t&&(t={});var i=e.split("."),a=this.translations;if(i.forEach(function(e){a=a&&a[e]}),a&&"object"==typeof a&&"undefined"!=typeof t.count&&(a=a[this.plural(s(t.count))]),"user"in t){var u=r(t,"user");t.username||(t.username=n(u))}return"string"==typeof a?(a=a.split(new RegExp("({[^}]+})","gi")),a.forEach(function(e,n){var s=e.match(/^{(.+)}$/i);s&&(a[n]=t[s[1]])}),a):o||[e]}}]),e}(),e("default",o)}}}),System.register("flarum/extend",[],function(e){"use strict";function t(e,t,n){var s=e[t];e[t]=function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];var o=s?s.apply(this,t):void 0;return n.apply(this,[o].concat(t)),o}}function n(e,t,n){var s=e[t];e[t]=function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return n.apply(this,[s.bind(this)].concat(t))}}return e("extend",t),e("override",n),{setters:[],execute:function(){}}}),System.register("flarum/components/Alert",["flarum/Component","flarum/components/Button","flarum/helpers/listItems","flarum/utils/extract"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=babelHelpers._extends({},this.props),t=r(e,"type");e.className="Alert Alert--"+t+" "+(e.className||"");var o=r(e,"children"),i=r(e,"controls")||[],a=r(e,"dismissible"),u=r(e,"ondismiss"),l=[];return(a||void 0===a)&&l.push(m(n,{icon:"times",className:"Button Button--link Button--icon Alert-dismiss",onclick:u})),m("div",e,m("span",{className:"Alert-body"},o),m("ul",{className:"Alert-controls"},s(i.concat(l))))}}]),t}(t),e("default",o)}}}),System.register("flarum/components/AlertManager",["flarum/Component","flarum/components/Alert"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.components=[]}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return m("div",{className:"AlertManager"},this.components.map(function(e){return m("div",{className:"AlertManager-alert"},e)}))}},{key:"show",value:function(e){if(!(e instanceof n))throw new Error("The AlertManager component can only show Alert components");e.props.ondismiss=this.dismiss.bind(this,e),this.components.push(e),m.redraw()}},{key:"dismiss",value:function(e){var t=this.components.indexOf(e);-1!==t&&(this.components.splice(t,1),m.redraw())}},{key:"clear",value:function(){this.components=[],m.redraw()}}]),t}(t),e("default",s)}}}),System.register("flarum/components/Badge",["flarum/Component","flarum/helpers/icon","flarum/utils/extract"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]}],execute:function(){r=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=babelHelpers._extends({},this.props),t=s(e,"type"),r=s(e,"icon");return e.className="Badge "+(t?"Badge--"+t:"")+" "+(e.className||""),e.title=s(e,"label")||"",e.key=e.type,m("span",e,r?n(r,{className:"Badge-icon"}):m.trust("&nbsp;"))}},{key:"config",value:function(e){e||this.props.label&&this.$().tooltip({container:"body"})}}]),t}(t),e("default",r)}}}),System.register("flarum/components/Button",["flarum/Component","flarum/helpers/icon","flarum/utils/extract","flarum/components/LoadingIndicator"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]}],execute:function(){o=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=babelHelpers._extends({},this.props);delete e.children,e.className=e.className||"";var t=s(e,"icon");t&&(e.className+=" hasIcon");var n=s(e,"loading");return(e.disabled||n)&&(e.className+=" disabled"+(n?" loading":""),delete e.onclick),m("button",e,this.getButtonContent())}},{key:"getButtonContent",value:function(){var e=this.props.icon;return[e&&e!==!0?n(e,{className:"Button-icon"}):"",this.props.children?m("span",{className:"Button-label"},this.props.children):"",this.props.loading?r.component({size:"tiny",className:"LoadingIndicator--inline"}):""]}}]),t}(t),e("default",o)}}}),System.register("flarum/components/Checkbox",["flarum/Component","flarum/components/LoadingIndicator","flarum/helpers/icon"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]}],execute:function(){r=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.loading=!1}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e="Checkbox "+(this.props.state?"on":"off")+" "+(this.props.className||"");return this.loading&&(e+=" loading"),this.props.disabled&&(e+=" disabled"),m("label",{className:e},m("input",{type:"checkbox",checked:this.props.state,disabled:this.props.disabled,onchange:m.withAttr("checked",this.onchange.bind(this))}),m("div",{className:"Checkbox-display"},this.getDisplay()),this.props.children)}},{key:"getDisplay",value:function(){return this.loading?n.component({size:"tiny"}):s(this.props.state?"check":"times")}},{key:"onchange",value:function(e){this.props.onchange&&this.props.onchange(e,this)}}]),t}(t),e("default",r)}}}),System.register("flarum/components/Dropdown",["flarum/Component","flarum/helpers/icon","flarum/helpers/listItems"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]}],execute:function(){r=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this.props.children?s(this.props.children):[];return m("div",{className:"ButtonGroup Dropdown dropdown "+this.props.className+" itemCount"+e.length},this.getButton(),this.getMenu(e))}},{key:"config",value:function(e){var t=this;e||(this.$().on("shown.bs.dropdown",function(){var e=t.$(".Dropdown-menu").removeClass("Dropdown-menu--top");e.toggleClass("Dropdown-menu--top",e.offset().top+e.height()>$(window).scrollTop()+$(window).height())}),this.$().on("hide.bs.dropdown",function(){t.props.onhide&&(t.props.onhide(),m.redraw())}))}},{key:"getButton",value:function(){return m("button",{className:"Dropdown-toggle "+this.props.buttonClassName,"data-toggle":"dropdown",onclick:this.props.onclick},this.getButtonContent())}},{key:"getButtonContent",value:function(){return[this.props.icon?n(this.props.icon,{className:"Button-icon"}):"",m("span",{className:"Button-label"},this.props.label),this.props.caretIcon?n(this.props.caretIcon,{className:"Button-caret"}):""]}},{key:"getMenu",value:function(e){return m("ul",{className:"Dropdown-menu dropdown-menu "+this.props.menuClassName},e)}}],[{key:"initProps",value:function(e){babelHelpers.get(Object.getPrototypeOf(t),"initProps",this).call(this,e),e.className=e.className||"",e.buttonClassName=e.buttonClassName||"",e.menuClassName=e.menuClassName||"",e.label=e.label||app.trans("core.controls"),e.caretIcon="undefined"!=typeof e.caretIcon?e.caretIcon:"caret-down"}}]),t}(t),e("default",r)}}}),System.register("flarum/components/FieldSet",["flarum/Component","flarum/helpers/listItems"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return m("fieldset",{className:this.props.className},m("legend",null,this.props.label),m("ul",null,n(this.props.children)))}}]),t}(t),e("default",s)}}}),System.register("flarum/components/GroupBadge",["flarum/components/Badge"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]}],execute:function(){n=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"initProps",value:function(e){babelHelpers.get(Object.getPrototypeOf(t),"initProps",this).call(this,e),e.group&&(e.icon=e.group.icon(),e.style={backgroundColor:e.group.color()},e.label="undefined"==typeof e.label?e.group.nameSingular():e.label,e.type="group--"+e.group.nameSingular(),delete e.group)}}]),t}(t),e("default",n)}}}),System.register("flarum/components/LinkButton",["flarum/components/Button"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]}],execute:function(){n=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=babelHelpers.get(Object.getPrototypeOf(t.prototype),"view",this).call(this);return e.tag="a",e}}],[{key:"initProps",value:function(e){e.active=this.isActive(e),e.config=e.config||m.route}},{key:"isActive",value:function(e){return"undefined"!=typeof e.active?e.active:m.route()===e.href}}]),t}(t),e("default",n)}}}),System.register("flarum/components/LoadingIndicator",["flarum/Component"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]}],execute:function(){n=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=babelHelpers._extends({},this.props);return e.className="LoadingIndicator "+(e.className||""),delete e.size,m("div",e,m.trust("&nbsp;"))}},{key:"config",value:function(){var e=this.props.size||"small";$.fn.spin.presets[e].zIndex="auto",this.$().spin(e)}}]),t}(t),e("default",n)}}}),System.register("flarum/components/Modal",["flarum/Component","flarum/components/Alert","flarum/components/Button"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]}],execute:function(){r=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.alert=null}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return this.alert&&(this.alert.props.dismissible=!1),m("div",{className:"Modal modal-dialog "+this.className()},m("div",{className:"Modal-content"},this.isDismissible()?m("div",{className:"Modal-close App-backControl"},s.component({icon:"times",onclick:this.hide.bind(this),className:"Button Button--icon Button--link"})):"",m("form",{onsubmit:this.onsubmit.bind(this)},m("div",{className:"Modal-header"},m("h3",{className:"App-titleControl App-titleControl--text"},this.title())),alert?m("div",{className:"Modal-alert"},this.alert):"",this.content())))}},{key:"isDismissible",value:function(){return!0}},{key:"className",value:function(){}},{key:"title",value:function(){}},{key:"content",value:function(){}},{key:"onsubmit",value:function(){}},{key:"onready",value:function(){this.$("form :input:first").focus().select()}},{key:"hide",value:function(){app.modal.close();
}},{key:"handleErrors",value:function(e){var t=e&&e.errors;t&&(this.alert=new n({type:"error",children:t.map(function(e,n){return[e.detail,n<t.length-1?m("br"):""]})})),m.redraw(),t?this.$("form [name="+t[0].path+"]").select():this.$("form :input:first").select()}}]),t}(t),e("default",r)}}}),System.register("flarum/components/ModalManager",["flarum/Component","flarum/components/Modal"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t);for(var e=arguments.length,n=Array(e),s=0;e>s;s++)n[s]=arguments[s];babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,n),this.showing=!1,this.component=null}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return m("div",{className:"ModalManager modal fade"},this.component&&this.component.render())}},{key:"config",value:function(e,t){e||(t.retain=!0,this.$().on("hidden.bs.modal",this.clear.bind(this)).on("shown.bs.modal",this.onready.bind(this)))}},{key:"show",value:function(e){if(!(e instanceof n))throw new Error("The ModalManager component can only show Modal components");clearTimeout(this.hideTimeout),this.showing=!0,this.component=e,m.redraw(!0),this.$().modal({backdrop:this.component.isDismissible()?!0:"static"}).modal("show"),this.onready()}},{key:"close",value:function(){var e=this;this.showing&&(this.hideTimeout=setTimeout(function(){e.$().modal("hide"),e.showing=!1}))}},{key:"clear",value:function(){this.component=null,m.lazyRedraw()}},{key:"onready",value:function(){this.component&&this.component.onready&&this.component.onready(this.$())}}]),t}(t),e("default",s)}}}),System.register("flarum/components/Navigation",["flarum/Component","flarum/components/Button","flarum/components/LinkButton"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]}],execute:function(){r=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=app,t=e.history,n=e.pane;return m("div",{className:"Navigation ButtonGroup "+(this.props.className||""),onmouseenter:n&&n.show.bind(n),onmouseleave:n&&n.onmouseleave.bind(n)},t.canGoBack()?[this.getBackButton(),this.getPaneButton()]:this.getDrawerButton())}},{key:"config",value:function(e,t){t.retain=!0}},{key:"getBackButton",value:function(){var e=app,t=e.history;return s.component({className:"Button Button--icon Navigation-back",href:t.backUrl(),icon:"chevron-left",config:function(){},onclick:function(e){e.shiftKey||e.ctrlKey||e.metaKey||2===e.which||(e.preventDefault(),t.back())}})}},{key:"getPaneButton",value:function(){var e=app,t=e.pane;return t&&t.active?n.component({className:"Button Button--icon Navigation-pin"+(t.pinned?" active":""),onclick:t.togglePinned.bind(t),icon:"thumb-tack"}):""}},{key:"getDrawerButton",value:function(){if(!this.props.drawer)return"";var e=app,t=e.drawer,s=app.session.user;return n.component({className:"Button Button--icon Navigation-drawer"+(s&&s.unreadNotificationsCount()?" unread":""),onclick:function(e){e.stopPropagation(),t.show()},icon:"reorder"})}}]),t}(t),e("default",r)}}}),System.register("flarum/components/Placeholder",["flarum/Component"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]}],execute:function(){n=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return m("div",{className:"Placeholder"},m("p",null,this.props.text))}}]),t}(t),e("default",n)}}}),System.register("flarum/components/Select",["flarum/Component","flarum/helpers/icon"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){var e=this.props,t=e.options,s=e.onchange,r=e.value;return m("span",{className:"Select"},m("select",{className:"Select-input FormControl",onchange:s?m.withAttr("value",s.bind(this)):void 0,value:r},Object.keys(t).map(function(e){return m("option",{value:e},t[e])})),n("sort",{className:"Select-caret"}))}}]),t}(t),e("default",s)}}}),System.register("flarum/components/SelectDropdown",["flarum/components/Dropdown","flarum/helpers/icon"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getButtonContent",value:function(){var e=this.props.children.filter(function(e){return e.props.active})[0],t=e&&e.props.children||this.props.defaultLabel;return t instanceof Array&&(t=t[0]),[m("span",{className:"Button-label"},t),n(this.props.caretIcon,{className:"Button-caret"})]}}],[{key:"initProps",value:function(e){e.caretIcon="undefined"!=typeof e.caretIcon?e.caretIcon:"sort",babelHelpers.get(Object.getPrototypeOf(t),"initProps",this).call(this,e),e.className+=" Dropdown--select"}}]),t}(t),e("default",s)}}}),System.register("flarum/components/Separator",["flarum/Component"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]}],execute:function(){n=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"view",value:function(){return m("li",{className:"Dropdown-separator"})}}]),t}(t),n.isListItem=!0,e("default",n)}}}),System.register("flarum/components/SplitDropdown",["flarum/components/Dropdown","flarum/components/Button","flarum/helpers/icon"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]}],execute:function(){r=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getButton",value:function(){var e=this.getFirstChild(),t=babelHelpers._extends({},e.props);return t.className=(t.className||"")+" SplitDropdown-button Button "+this.props.buttonClassName,[n.component(t),m("button",{className:"Dropdown-toggle Button Button--icon "+this.props.buttonClassName,"data-toggle":"dropdown"},s(this.props.icon,{className:"Button-icon"}),s("caret-down",{className:"Button-caret"}))]}},{key:"getFirstChild",value:function(){for(var e=this.props.children;e instanceof Array;)e=e[0];return e}}],[{key:"initProps",value:function(e){babelHelpers.get(Object.getPrototypeOf(t),"initProps",this).call(this,e),e.className+=" Dropdown--split",e.menuClassName+=" Dropdown-menu--right"}}]),t}(t),e("default",r)}}}),System.register("flarum/components/Switch",["flarum/components/Checkbox"],function(e){"use strict";var t,n;return{setters:[function(e){t=e["default"]}],execute:function(){n=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getDisplay",value:function(){return this.loading?babelHelpers.get(Object.getPrototypeOf(t.prototype),"getDisplay",this).call(this):""}}],[{key:"initProps",value:function(e){babelHelpers.get(Object.getPrototypeOf(t),"initProps",this).call(this,e),e.className=(e.className||"")+" Checkbox--switch"}}]),t}(t),e("default",n)}}}),System.register("flarum/helpers/avatar",[],function(e){"use strict";function t(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.className="Avatar "+(t.className||"");var n="",s="undefined"===t.title||t.title;if(s||delete t.title,e){var r=e.username()||"?",o=e.avatarUrl();if(s&&(t.title=t.title||r),o)return m("img",babelHelpers._extends({},t,{src:o}));n=r.charAt(0).toUpperCase(),t.style={background:e.color()}}return m("span",t,n)}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/helpers/fullTime",[],function(e){"use strict";function t(e){var t=moment(e),n=t.format(),s=t.format("LLLL");return m("time",{pubdate:!0,datetime:n},s)}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/helpers/highlight",["flarum/utils/string"],function(e){"use strict";function t(e,t,s){if(!t&&!s)return e;var r=t instanceof RegExp?t:new RegExp(t,"gi"),o=e,i=0;return s&&(t&&(i=Math.max(0,e.search(r)-s/2)),o=n(o,s,i)),o=$("<div/>").text(o).html(),t&&(o=o.replace(r,"<mark>$&</mark>")),m.trust(o)}var n;return e("default",t),{setters:[function(e){n=e.truncate}],execute:function(){}}}),System.register("flarum/helpers/humanTime",["flarum/utils/humanTime"],function(e){"use strict";function t(e){var t=moment(e),s=t.format(),r=t.format("LLLL"),o=n(e);return m("time",{pubdate:!0,datetime:s,title:r,"data-humantime":!0},o)}var n;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){}}}),System.register("flarum/helpers/icon",[],function(e){"use strict";function t(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.className="icon fa fa-fw fa-"+e+" "+(t.className||""),m("i",t)}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/helpers/listItems",["flarum/components/Separator","flarum/utils/classList"],function(e){"use strict";function t(e){return e&&e.component===r}function n(e){var n=[],s=void 0;return e.forEach(function(r,o){(!t(r)||s&&!t(s)&&o!==e.length-1)&&(s=r,n.push(r))}),n}function s(e){return e instanceof Array||(e=[e]),n(e).map(function(e){var t=e.component&&e.component.isListItem,n=e.component&&e.component.isActive&&e.component.isActive(e.props),s=e.props?e.props.itemClassName:e.itemClassName;return[t?e:m("li",{className:o([e.itemName?"item-"+e.itemName:"",s,n?"active":""])},e)," "]})}var r,o;return e("default",s),{setters:[function(e){r=e["default"]},function(e){o=e["default"]}],execute:function(){}}}),System.register("flarum/helpers/punctuate",[],function(e){"use strict";function t(e){var t=[];return e.forEach(function(n,s){t.push(n),s<e.length-1&&t.push((e.length>2?", ":"")+(s===e.length-2?" and ":""))}),t}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/helpers/username",[],function(e){"use strict";function t(e){var t=e&&e.username()||app.trans("deleted");return m("span",{className:"username"},t)}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/initializers/humanTime",["flarum/utils/humanTime"],function(e){"use strict";function t(){$("[data-humantime]").each(function(){var e=$(this),t=s(e.attr("datetime"));e.html(t)})}function n(){setInterval(t,1e3)}var s;return e("default",n),{setters:[function(e){s=e["default"]}],execute:function(){}}}),System.register("flarum/initializers/preload",["flarum/Session"],function(e){"use strict";function t(e){e.store.pushPayload({data:e.preload.data}),e.forum=e.store.getById("forums",1),e.session=new n(e.preload.session.token,e.store.getById("users",e.preload.session.userId))}var n;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){}}}),System.register("flarum/initializers/store",["flarum/Store","flarum/models/Forum","flarum/models/User","flarum/models/Discussion","flarum/models/Post","flarum/models/Group","flarum/models/Activity","flarum/models/Notification"],function(e){"use strict";function t(e){e.store=new n({forums:s,users:r,discussions:o,posts:i,groups:a,activity:u,notifications:l})}var n,s,r,o,i,a,u,l;return e("default",t),{setters:[function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]},function(e){a=e["default"]},function(e){u=e["default"]},function(e){l=e["default"]}],execute:function(){}}}),System.register("flarum/models/Discussion",["flarum/Model","flarum/utils/mixin","flarum/utils/computed","flarum/utils/ItemList","flarum/utils/string"],function(e){"use strict";var t,n,s,r,o,i;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e.slug}],execute:function(){i=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"removePost",value:function(e){var t=this.data.relationships,n=t&&t.posts;n&&n.data.some(function(t,s){return e===t.id?(n.data.splice(s,1),!0):void 0})}},{key:"unreadCount",value:function(){var e=app.session.user;return e&&e.readTime()<this.lastTime()?Math.max(0,this.lastPostNumber()-(this.readNumber()||0)):0}},{key:"badges",value:function(){return new r}},{key:"postIds",value:function(){return this.data.relationships.posts.data.map(function(e){return e.id})}}]),t}(n(t,{title:t.attribute("title"),slug:s("title",o),startTime:t.attribute("startTime",t.transformDate),startUser:t.hasOne("startUser"),startPost:t.hasOne("startPost"),lastTime:t.attribute("lastTime",t.transformDate),lastUser:t.hasOne("lastUser"),lastPost:t.hasOne("lastPost"),lastPostNumber:t.attribute("lastPostNumber"),commentsCount:t.attribute("commentsCount"),repliesCount:s("commentsCount",function(e){return Math.max(0,e-1)}),posts:t.hasMany("posts"),relevantPosts:t.hasMany("relevantPosts"),readTime:t.attribute("readTime",t.transformDate),readNumber:t.attribute("readNumber"),isUnread:s("unreadCount",function(e){return!!e}),isRead:s("unreadCount",function(e){return app.session.user&&!e}),canReply:t.attribute("canReply"),canRename:t.attribute("canRename"),canDelete:t.attribute("canDelete")})),e("default",i)}}}),System.register("flarum/models/Forum",["flarum/Model","flarum/utils/mixin"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"apiEndpoint",value:function(){return"/forum"}}]),t}(n(t,{canStartDiscussion:t.attribute("canStartDiscussion")})),e("default",s)}}}),System.register("flarum/models/Group",["flarum/Model","flarum/utils/mixin"],function(e){"use strict";var t,n,s;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),t}(n(t,{nameSingular:t.attribute("nameSingular"),namePlural:t.attribute("namePlural"),color:t.attribute("color"),icon:t.attribute("icon")})),s.ADMINISTRATOR_ID="1",s.GUEST_ID="2",s.MEMBER_ID="3",e("default",s)}}}),System.register("flarum/models/Notification",["flarum/Model","flarum/utils/mixin","flarum/utils/computed"],function(e){"use strict";var t,n,s,r;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]}],execute:function(){r=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),t}(n(t,{contentType:t.attribute("contentType"),subjectId:t.attribute("subjectId"),content:t.attribute("content"),time:t.attribute("time",t.date),isRead:t.attribute("isRead"),unreadCount:t.attribute("unreadCount"),additionalUnreadCount:s("unreadCount",function(e){return Math.max(0,e-1)}),user:t.hasOne("user"),sender:t.hasOne("sender"),subject:t.hasOne("subject")})),e("default",r)}}}),System.register("flarum/models/Post",["flarum/Model","flarum/utils/mixin","flarum/utils/computed","flarum/utils/string"],function(e){"use strict";var t,n,s,r,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e.getPlainContent}],execute:function(){o=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),t}(n(t,{number:t.attribute("number"),discussion:t.hasOne("discussion"),time:t.attribute("time",t.transformDate),user:t.hasOne("user"),contentType:t.attribute("contentType"),content:t.attribute("content"),contentHtml:t.attribute("contentHtml"),contentPlain:s("contentHtml",r),editTime:t.attribute("editTime",t.transformDate),editUser:t.hasOne("editUser"),isEdited:s("editTime",function(e){return!!e}),hideTime:t.attribute("hideTime",t.transformDate),hideUser:t.hasOne("hideUser"),isHidden:s("hideTime",function(e){return!!e}),canEdit:t.attribute("canEdit"),canDelete:t.attribute("canDelete")})),e("default",o)}}}),System.register("flarum/models/User",["flarum/Model","flarum/utils/mixin","flarum/utils/stringToColor","flarum/utils/ItemList","flarum/utils/computed","flarum/components/GroupBadge"],function(e){"use strict";var t,n,s,r,o,i,a;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]},function(e){s=e["default"]},function(e){r=e["default"]},function(e){o=e["default"]},function(e){i=e["default"]}],execute:function(){a=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"isOnline",value:function(){return this.lastSeenTime()>moment().subtract(5,"minutes").toDate()}},{key:"badges",value:function(){var e=new r,t=this.groups();return t&&t.forEach(function(t){t.nameSingular();e.add("group"+t.id(),i.component({group:t}))}),e}},{key:"calculateAvatarColor",value:function(){var e=new Image,t=this;e.onload=function(){var e=new ColorThief;t.avatarColor=e.getColor(this),t.freshness=new Date,m.redraw()},e.src=this.avatarUrl()}},{key:"savePreferences",value:function(e){var t=this.preferences();return babelHelpers._extends(t,e),this.save({preferences:t})}}]),t}(n(t,{username:t.attribute("username"),email:t.attribute("email"),isActivated:t.attribute("isActivated"),password:t.attribute("password"),avatarUrl:t.attribute("avatarUrl"),bio:t.attribute("bio"),bioHtml:o("bio",function(e){return e?"<p>"+$("<div/>").text(e).html().replace(/\n/g,"<br>").autoLink()+"</p>":""}),preferences:t.attribute("preferences"),groups:t.hasMany("groups"),joinTime:t.attribute("joinTime",t.transformDate),lastSeenTime:t.attribute("lastSeenTime",t.transformDate),readTime:t.attribute("readTime",t.transformDate),unreadNotificationsCount:t.attribute("unreadNotificationsCount"),discussionsCount:t.attribute("discussionsCount"),commentsCount:t.attribute("commentsCount"),canEdit:t.attribute("canEdit"),canDelete:t.attribute("canDelete"),avatarColor:null,color:o("username","avatarUrl","avatarColor",function(e,t,n){return n?"rgb("+n.join(", ")+")":t?(this.calculateAvatarColor(),""):"#"+s(e)})})),e("default",a)}}}),System.register("flarum/utils/Drawer",[],function(e){"use strict";var t;return{setters:[],execute:function(){t=function(){function e(){var t=this;babelHelpers.classCallCheck(this,e),$("#content").click(function(e){t.isOpen()&&(e.preventDefault(),t.hide())})}return babelHelpers.createClass(e,[{key:"isOpen",value:function(){return $("#app").hasClass("drawerOpen")}},{key:"hide",value:function(){$("#app").removeClass("drawerOpen"),this.$backdrop&&this.$backdrop.remove()}},{key:"show",value:function(){var e=this;$("#app").addClass("drawerOpen"),this.$backdrop=$("<div/>").addClass("drawer-backdrop fade").appendTo("body").click(function(){return e.hide()}),setTimeout(function(){return e.$backdrop.addClass("in")})}}]),e}(),e("default",t)}}}),System.register("flarum/utils/ItemList",[],function(e){"use strict";var t,n;return{setters:[],execute:function(){t=function s(e,t){babelHelpers.classCallCheck(this,s),this.content=e,this.priority=t},n=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"add",value:function(e,n){var s=arguments.length<=2||void 0===arguments[2]?0:arguments[2];this[e]=new t(n,s)}},{key:"merge",value:function(e){for(var n in e)e.hasOwnProperty(n)&&e[n]instanceof t&&(this[n]=e[n])}},{key:"toArray",value:function(){var e=[];for(var n in this)this.hasOwnProperty(n)&&this[n]instanceof t&&(this[n].content=Object(this[n].content),this[n].content.itemName=n,e.push(this[n]),this[n].key=e.length);return e.sort(function(e,t){return e.priority===t.priority?e.key-t.key:e.priority>t.priority?-1:1}).map(function(e){return e.content})}}]),e}(),e("default",n)}}}),System.register("flarum/utils/ScrollListener",[],function(e){"use strict";var t,n;return{setters:[],execute:function(){t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},n=function(){function e(t){babelHelpers.classCallCheck(this,e),this.callback=t,this.lastTop=-1}return babelHelpers.createClass(e,[{key:"loop",value:function(){this.active&&(this.update(),t(this.loop.bind(this)))}},{key:"update",value:function(e){var t=window.pageYOffset;(this.lastTop!==t||e)&&(this.callback(t),this.lastTop=t)}},{key:"start",value:function(){this.active||(this.active=!0,this.loop())}},{key:"stop",value:function(){this.active=!1}}]),e}(),e("default",n)}}}),System.register("flarum/utils/SubtreeRetainer",[],function(e){"use strict";var t;return{setters:[],execute:function(){t=function(){function e(){babelHelpers.classCallCheck(this,e);for(var t=arguments.length,n=Array(t),s=0;t>s;s++)n[s]=arguments[s];this.callbacks=n,this.data={}}return babelHelpers.createClass(e,[{key:"retain",value:function(){var e=this,t=!1;return this.callbacks.forEach(function(n,s){var r=n();r!==e.data[s]&&(e.data[s]=r,t=!0)}),t?!1:{subtree:"retain"}}},{key:"check",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];this.callbacks=this.callbacks.concat(t)}},{key:"invalidate",value:function(){this.data={}}}]),e}(),e("default",t)}}}),System.register("flarum/utils/abbreviateNumber",[],function(e){"use strict";function t(e){return e>=1e6?Math.floor(e/1e6)+"M":e>=1e3?Math.floor(e/1e3)+"K":e.toString()}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/utils/anchorScroll",[],function(e){"use strict";function t(e,t){var n=$(window),s=$(e).offset().top-n.scrollTop();t(),n.scrollTop($(e).offset().top-s)}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/utils/classList",[],function(e){"use strict";function t(e){var t=void 0;if(e instanceof Array)t=e.filter(function(e){return e});else{t=[];for(var n in e)e[n]&&t.push(n)}return t.join(" ")}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/utils/computed",[],function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var s=t.slice(0,-1),r=t.slice(-1)[0],o={},i=void 0;return function(){var e=this,t=!1;return s.forEach(function(n){var s="function"==typeof e[n]?e[n]():e[n];o[n]!==s&&(t=!0,o[n]=s)}),t&&(i=r.apply(this,s.map(function(e){return o[e]}))),i}}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/utils/evented",[],function(e){"use strict";return{setters:[],execute:function(){e("default",{handlers:null,getHandlers:function(e){return this.handlers=this.handlers||{},this.handlers[e]=this.handlers[e]||[],this.handlers[e]},trigger:function(e){for(var t=this,n=arguments.length,s=Array(n>1?n-1:0),r=1;n>r;r++)s[r-1]=arguments[r];this.getHandlers(e).forEach(function(e){return e.apply(t,s)})},on:function(e,t){this.getHandlers(e).push(t)},one:function(e,t){var n=function s(){t.apply(this,arguments),this.off(e,s)};this.getHandlers(e).push(n)},off:function(e,t){var n=this.getHandlers(e),s=n.indexOf(t);-1!==s&&n.splice(s,1)}})}}}),System.register("flarum/utils/extract",[],function(e){"use strict";function t(e,t){var n=e[t];return delete e[t],n}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/utils/extractText",[],function(e){"use strict";function t(e){var n="";return n+=e instanceof Array?e.map(function(e){return t(e)}).join(""):"object"==typeof e?t(e.children):e}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/utils/formatNumber",[],function(e){"use strict";function t(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/utils/humanTime",[],function(e){"use strict";function t(e){var t=moment(e),n=864e5,s=t.diff(moment()),r=null;return r=-30*n>s?t.year()===moment().year()?t.format("D MMM"):t.format("MMM 'YY"):t.fromNow()}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/utils/mapRoutes",[],function(e){"use strict";function t(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n={};for(var s in e){var r=e[s];r.component&&(r.component.props.routeName=s),n[t+r.path]=r.component}return n}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/utils/mixin",[],function(e){"use strict";function t(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;t>s;s++)n[s-1]=arguments[s];var r=function(e){function t(){babelHelpers.classCallCheck(this,t),babelHelpers.get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return babelHelpers.inherits(t,e),t}(e);return n.forEach(function(e){babelHelpers._extends(r.prototype,e)}),r}return e("default",t),{setters:[],execute:function(){}}}),System.register("flarum/utils/patchMithril",["../Component"],function(e){"use strict";function t(e){var t=e.m,s=function(e){for(var s=arguments.length,r=Array(s>1?s-1:0),o=1;s>o;o++)r[o-1]=arguments[o];return e.prototype&&e.prototype instanceof n?e.component.apply(e,r):t.apply(this,arguments)};Object.keys(t).forEach(function(e){return s[e]=t[e]}),s.lazyRedraw=function(){s.startComputation(),s.endComputation()},e.m=s}var n;return e("default",t),{setters:[function(e){n=e["default"]}],execute:function(){}}}),System.register("flarum/utils/string",[],function(e){"use strict";function t(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return(n>0?"...":"")+e.substring(n,n+t)+(e.length>n+t?"...":"")}function n(e){return e.toLowerCase().replace(/[^a-z0-9]/gi,"-").replace(/-+/g,"-").replace(/-$|^-/g,"")||"-"}function s(e){var t=$("<div/>").html(e.replace(/(<\/p>|<br>)/g,"$1 &nbsp;"));return t.find(s.removeSelectors.join(",")).remove(),t.text()}function r(e){return e.substr(0,1).toUpperCase()+e.substr(1)}return e("truncate",t),e("slug",n),e("getPlainContent",s),e("ucfirst",r),{setters:[],execute:function(){s.removeSelectors=["blockquote","script"]}}}),System.register("flarum/utils/stringToColor",[],function(e){"use strict";function t(e,t,n){var s=void 0,r=void 0,o=void 0,i=Math.floor(6*e),a=6*e-i,u=n*(1-t),l=n*(1-a*t),c=n*(1-(1-a)*t);switch(i%6){case 0:s=n,r=c,o=u;break;case 1:s=l,r=n,o=u;break;case 2:s=u,r=n,o=c;break;case 3:s=u,r=l,o=n;break;case 4:s=c,r=u,o=n;break;case 5:s=n,r=u,o=l}return{r:Math.floor(255*s),g:Math.floor(255*r),b:Math.floor(255*o)}}function n(e){for(var n=0,s=0;s<e.length;s++)n+=e.charCodeAt(s);var r=n%360,o=t(r/360,.3,.9);return""+o.r.toString(16)+o.g.toString(16)+o.b.toString(16)}return e("default",n),{setters:[],execute:function(){}}});